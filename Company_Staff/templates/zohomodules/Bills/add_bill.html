{% extends 'base.html' %}
{% block content %}
{% load static %}
{% load tz %}


<!-- Bootstrap SelectPicker CSS -->
<link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/css/bootstrap-select.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/css/select2.min.css" rel="stylesheet" />
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.0/js/select2.min.js" defer></script>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
    crossorigin="anonymous"></script>

<style>
    .selectpicker{
        background-color: black; 
        color: white;
    }
    .select#select_vendor.form-select {
      background-color: black !important;
      color: white; /* Change text color to white for better contrast */
    }
    .bootstrap-select.show > .dropdown-menu {
      background-color: black !important;
    }
    .select2{
        background-color: black;
        color: white;
    }
    label {
        color: white;
    }

    .section-3 {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        gap: 1rem;
        margin-bottom: 1.5rem;
        margin-top: 1rem;
    }

    .section-3 .section-toggle {
        margin-bottom: 0.50rem;
    }

    .section-toggle a {

        color: rgb(230, 171, 45);
        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        font-size: 1.275rem;
    }

    .add_another {

        color: rgb(230, 171, 45);
    }

    #tbl thead th {
        font-size: 0.785rem;
    }

    @media (max-width:700px) {
        .section-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;

        }

        .section-3 .section-toggle a {

            color: rgb(230, 171, 45);
            font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            font-size: 0.875rem;
        }
    }
</style>
<style>
    /* .......................................... search box1.............. */
    .select-box1 {
        position: relative;
        width: 100%;
    }


    .select-option1 {
        position: relative;

    }

    .select-option1 input {
        width: 100%;
        cursor: pointer;
        background-color: white;
        color: black;
        border-radius: 7px;
        padding: 10px 15px;
        border: 0 !important;
        outline: 0 !important;
    }

    .select-option1:after {
        content: "";
        border-top: 12px solid #000;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        position: absolute;
        right: 15px;
        top: 50%;
        margin-top: -8px;

    }

    .content1 {
        background-color: white;
        position: absolute;
        color: black;
        border-radius: 7px;
        margin-top: 15px;
        width: 100%;
        z-index: 999;
        padding: 20px;
        display: none;
    }

    .search1 input {
        width: 100%;
        font-size: 17px;
        padding: 15px;
        outline: 0;
        border: 1px solid #b3b3b3;
        border-radius: 5px;
    }

    .options1 {
        margin-top: 10px;
        max-height: 150px;
        overflow-y: scroll;
        padding: 0;
    }

    /* .options1::-webkit-scrollbar{
      width: 5px;
     
    } */
    .options1 li {
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        border-bottom: 1px solid gray;
    }

    .select-box1.active .content1 {
        display: block;
    }

    .select-box1.active .select-option1:after {
        transform: rotate(-180deg);
    }
    
</style>
<script>
    {% if messages %}
    {% for message in messages %}
    {% if message.tags == 'success' %}
    swal.fire({
        title: "Good job!",
        text: '{{ message }}',
        icon: "success",
        showConfirmButton: false,
        timer: 2900
    });
    {% elif message.tags == 'error' %}
    Swal.fire({
        icon: 'error',
        title: "Ooops Error !",
        text: '{{ message }}',
        showConfirmButton: false,
        timer: 2900
    });
    {% endif %}
    {% endfor %}
    {% endif %}
</script>
<style>
    /* SEARCH STYLE */
    /* Style the Select2 search input */
    .select2-search__field {
        
        /* Set the width as needed */
        padding: 8px;
        /* Adjust padding as needed */
        border: 1px solid #92acc6;
        /* Add border color */
        border-radius: 4px;
        /* Add border-radius for rounded corners */
        outline: none;
        /* Remove the outline */
        color: #ffffff;
        background-color: black;
    }

    /*   
    .select2-container .select2-selection--single{box-sizing:border-box;cursor:pointer;display:block;height:35px;user-select:none;color: black;
      -webkit-user-select:none;background-color: #fff;} */
    .select2-container .select2-selection--single .select2-selection__rendered {
        border: 1px solid white;
        border-radius: 6px;
        display: block;
        padding-left: 20px;
        padding-right: 20px;
        height: 35px;
        color: rgb(252, 252, 252);
        background-color: #000000;
        border-radius: 2px;
        box-shadow: #fcfcfc;
        border-color: #f2e8e8;
    }

    .select2-dropdown {
        background-color: rgb(0, 0, 0);
        color: rgb(253, 253, 253);
        position: absolute;
        left: -100000px;
        width: 100%;
        z-index: 2001;
        color: rgb(255, 255, 255);
        border-color: #f2e8e8;
    }

    .select2-results {
        display: block;
        border: #ced4da;
        border-color: #f2e8e8;
    }

    .select2-results__options {
        list-style: none;
        margin: 0;
        padding: 0;
        color: rgb(255, 255, 255);
        background-color: #030303;
        padding-left: 20px;
        border-color: #f2e8e8;
    }

    .select2-results__option[aria-selected] {
        cursor: pointer;
        color: rgb(251, 251, 251);
        background-color: #0c0c0c;
        border-color: #f2e8e8;
    }

    .select2-container--open .select2-dropdown {
        left: 0;
        color: rgb(255, 255, 255);
        background-color: #000000;
        border-color: #f2e8e8;
    }

    .select2-hidden-accessible {
        background-color: #000000;
        border: 2px !important;
        clip: rect(0 0 0 0) !important;
        -webkit-clip-path: inset(50%) !important;
        clip-path: inset(50%) !important;
        height: 0px !important;
        padding: 0 !important;
        position: absolute !important;
        width: 1px !important;
        white-space: nowrap !important;
        color: rgb(250, 250, 250)
    }

    /* .select2-container--default .select2-selection--single{background-color:#000000;border:1px solid #000000;border-radius:4px;color: rgb(0, 0, 0);background-color: #ede4e4;} */
    /* .select2-hidden-accessible{background-color: #fff;border:0 !important;clip:rect(0 0 0 0) !important;-webkit-clip-path:inset(50%) !important;clip-path:inset(50%) !important;height:1px !important;overflow:hidden !important;padding:0 !important;position:absolute !important;width:1px !important;white-space:nowrap !important;color: black}  */
    .select2-container--default .select2-selection--single:focus,
    .select2-container--default .select2-selection--single .select2-search__field:focus,
    .typeahead:focus,
    .tt-query:focus,
    .tt-hint:focus {
        border: 1px solid rgba(250, 250, 250, 0.5);
        background-color: #d3bcbc;
    }
</style>
<div class="body-wrapper">
    <div class="container-fluid">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                {% if log_id.user_type == 'Staff' %} <li class="breadcrumb-item"><a href="{% url 'staff_dashboard' %}"
                        class="text-warning-emphasis">Dashboard</a></li>{% endif %}
                {% if log_id.user_type == 'Company' %} <li class="breadcrumb-item"><a
                        href="{% url 'company_dashboard' %}" class="text-warning-emphasis">Dashboard</a></li>{% endif %}
                <li class="breadcrumb-item"><a href="" class="text-warning-emphasis">Bill_list</a></li>
                <li class="breadcrumb-item" aria-current="page">Add Bill</li>
        </nav>
        <div class="row mt-5">
            <div class="col-md-12">
                <div class="card mb-3 bg-black shadow p-3 mb-5 rounded" style="max-width: 1200px;">
                    <div class="row mt-4">
                        <section>
                            <div class="container pl-5" style="color:white;">
                                <div class="header pb-5">
                                    <h2 style="text-align: center;color:white;">VENDOR DETAILS</h2>
                                    <hr class="text-warning font-weight-bold">
                                    {% for message in messages %}
                                    <h5>
                                        <div class="alert alert-danger message">
                                            {{ message }}
                                        </div>
                                    </h5>
                                    {% endfor %}
                                </div>
                                <form method="POST" action="{% url 'add_bill_func' %}" enctype="multipart/form-data" id="myForm">
                                    {% csrf_token %}
                                    <div class="row">
                                        <div class="data  col-lg-12 col-md-12 col-sm-12">
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">VENDOR NAME *</label>
                                                </div>
                                                <div class="input-container col-sm-6">

                                                    <select  style="background-color: black;"
                                                        class="form-control selectpicker text-center rounded-2 py-0"
                                                        data-live-search="true" name="select_vendor" id="select_vendor"
                                                        required>

                                                        <option class="bg-white" value="" selected disabled>-- SELECT --
                                                        </option>

                                                        {% for i in vendor %}
                                                        <option value="{{i.id}}">{{i.first_name}} {{i.last_name}}
                                                        </option>
                                                        {% endfor %}

                                                    </select>

                                                </div>
                                                <div class="input-container col-2">
                                                    <a class="btn btn-warning text-right my-sm-0 my-2 px-3 py-2 flex-sm-row"
                                                        role="button" data-toggle="modal" data-target="#newvendor"
                                                        data-toggle="tooltip" href="">
                                                        <i class="fa fa-plus fs-4"></i>
                                                    </a>
                                                </div>
                                            </div>


                                            <script>
                                                $(document).ready(function () {
                                                    $("#select_vendor").change(function () {
                                                        var vendorId = $(this).val();

                                                        // Make an AJAX request to fetch vendor details
                                                        $.ajax({
                                                            url: '/get_vendor_details/' + vendorId + '/',
                                                            type: 'GET',
                                                            success: function (data) {
                                                                // Update the fields with fetched details
                                                                $("#vendorEmail").val(data.email);
                                                                $("#vendorGST").val(data.gst);
                                                                $("#vendorGSTIn").val(data.gstin);
                                                                $("#psupply").val(data.psupply);
                                                                
                                                                var address = data.baddress;
                                                                var city = data.billing_city;
                                                                var state = data.billing_state;
                                                                var pincode = data.billing_pin_code;

                                                                var updatedAddress = data.baddress + '\n' + data.billing_city + '\n' +  data.billing_state + '\n' + data.billing_pin_code;
                                                                $("#vendorAddress").val(updatedAddress);

                                                                // Update other fields similarly
                                                            },
                                                            error: function (error) {
                                                                console.log(error);
                                                            }
                                                        });
                                                    });
                                                });
                                            </script>

                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">GST TREATMENT</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="text" class="form-control" name=""
                                                        id="vendorGST" required>
                                                </div>
                                            </div>

                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">GST IN</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="text" class="form-control "
                                                        name="Gname" id="vendorGSTIn" required>
                                                </div>
                                            </div>
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">BILLING ADDRESS</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <textarea class="form-control" name="Baddress" id="vendorAddress" cols="30" rows="5" required></textarea>
                                                   
                                                </div>
                                            </div>
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">EMAIL</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="text" class="form-control" name=""
                                                        id="vendorEmail" required>
                                                </div>
                                            </div>
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">PLACE OF SUPPLY</label>
                                                </div>
                                                <div class=" input-container col-sm-6">
                                                    <select name="place_of_supply" id="psupply"
                                                        class="form-control">
                                                        <option value="value" selected disabled>Choose Place Of Supply
                                                        </option>
                                                        <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman
                                                            And Nicobar Islands</option>
                                                        <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                                                        <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh
                                                        </option>
                                                        <option value="volvo">[AS]-Assam</option>
                                                        <option value="[BR]-Bihar">[BR]-Bihar</option>
                                                        <option value="volvo">[CH]- Chandhigarh</option>
                                                        <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                                                        <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                                                        <option value="volvo">[DL]- Delhi</option>
                                                        <option value="[GA]-Goa">[GA]-Goa</option>
                                                        <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                                                        <option value="[HR]-Haryana">[HR]-Haryana</option>
                                                        <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh
                                                        </option>
                                                        <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir
                                                        </option>
                                                        <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                                                        <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                                                        <option value="[KL]-Kerala">[KL]-Kerala</option>
                                                        <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                                                        <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                                                        <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                                                        <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                                                        <option value="[MN]-Manipur">[MN]-Manipur</option>
                                                        <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                                                        <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                                                        <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                                        <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                                        <option value="[OD]-Odisha">[OD]-Odisha</option>
                                                        <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                                                        <option value="[PB]-Punjab">[PB]-Punjab.</option>
                                                        <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                                                        <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                                                        <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                                                        <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                                                        <option value="[TR]-Tripura">[TR]-Tripura</option>
                                                        <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                                                        <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                                                        <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                                                        <option value="[OT]-Other Territory">[OT]-Other Territory
                                                        </option>
                                                    </select>
                                                </div>

                                            </div>
                                            <script>
                                                $(document).ready(function () {
                                                    $("#psupply").change(function () {
                                                        var newPlaceOfSupply = $(this).val();
                                                        var vendorId = $("#select_vendor").val();

                                                        // Get the CSRF token
                                                        var csrfToken = "{{ csrf_token }}";

                                                        // Make an AJAX request to update the place of supply in the database
                                                        $.ajax({
                                                            url: '/update_place_of_supply/',
                                                            type: 'POST',
                                                            data: {
                                                                vendor_id: vendorId,
                                                                place_of_supply: newPlaceOfSupply,
                                                                csrfmiddlewaretoken: csrfToken  // Include the CSRF token
                                                            },
                                                            success: function (response) {
                                                                console.log(response);
                                                            },
                                                            error: function (error) {
                                                                console.log(error);
                                                            }
                                                        });
                                                    });
                                                });
                                            </script>

                                        </div>
                                    </div>

                                    <br>
                                    <br>
                                    <hr class="text-warning font-weight-bold">
                                    <div class="header pb-5">
                                        <h2 style="text-align: center;color:white;">BILL DETAILS</h2>
                                        <hr class="text-warning font-weight-bold">
                                        {% for message in messages %}
                                        <h5>
                                            <div class="alert alert-danger message">
                                                {{ message }}
                                            </div>
                                        </h5>
                                        {% endfor %}
                                    </div>

                                    <div class="row">
                                        <div class="data  col-lg-12 col-md-12 col-sm-12">
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">BILL NUMBER</label><span class="text-danger mt-1 ml-3"
                                                        id="dangerdiv" style="display: none;"><span class="text-white">
                                                            (</span>This Id Should be Continous <span
                                                            class="text-white">)</span></span>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="text" class="form-control"
                                                        id="bill_code_number" name="bill_code_number" 
                                                        placeholder="{{bill_no}}" required>
                                                </div>
                                            </div>
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">REFERNCE NUMBER</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="text" class="form-control"
                                                        name="Reference_No" id="Date" placeholder="{{ref_no}}" required>
                                                </div>
                                            </div>
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">PURCHASE ORDER NUMBER</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="text" class="form-control"
                                                        name="Purchase_Order_NO" id="Date" readonly required>
                                                </div>
                                            </div>
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">BILL DATE</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input style="-webkit-calendar-picker-indicator-color: rgb(255, 255, 255);" type="date" class="form-control"
                                                        name="date1" id="date1" value="{{current_dt|date:'Y-m-d'}}" required>
                                                </div>
                                            </div>
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">DUE DATE</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="date" class="form-control "
                                                        name="date2" id="date2" required>
                                                </div>
                                            </div>


                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">PAYMENT TERMS</label>
                                                </div>
                                                <div class=" input-container col-sm-6">
                                                    <select name="source_supply" id="terms"
                                                        class="form-control ">
                                                        <option value="value" selected disabled>Choose Your option
                                                        </option>


                                                        {% for pay_terms in payment %}
                                                        <option value="{{pay_terms.days}}">{{pay_terms.term_name}}
                                                        </option>
                                                        {% endfor %}

                                                    </select>
                                                </div>
                                                <div class="input-container col-2">
                                                    <a class="btn btn-warning text-right my-sm-0 my-2 px-3 py-2 flex-sm-row"
                                                        role="button" data-toggle="modal" data-target="#payment"
                                                        data-toggle="tooltip" href="">
                                                        <i class="fa fa-plus fs-4"></i>
                                                    </a>
                                                </div>

                                            </div>



                                        </div>
                                    </div>

                                    <hr class="text-warning font-weight-bold">
                                    <div class="header pb-5">
                                        <h2 style="text-align: center;color:white;">CUSTOMER DETAILS</h2>
                                        <hr class="text-warning font-weight-bold">
                                        {% for message in messages %}
                                        <h5>
                                            <div class="alert alert-danger message">
                                                {{ message }}
                                            </div>
                                        </h5>
                                        {% endfor %}
                                    </div>


                                    <div class="row">
                                        <div class="data  col-lg-12 col-md-12 col-sm-12">
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">CUSTOMER NAME *</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <select
                                                        class="form-control selectpicker bg-white text-center rounded-2 py-0"
                                                        data-live-search="true" name="Customer" id="SelectCustomer"
                                                        required>
                                                        <option class="bg-white" value="" selected disabled>-- SELECT --
                                                        </option>
                                                        {% for i in customer %}
                                                        <option value="{{i.id}}">{{i.first_name}} {{i.last_name}}
                                                        </option>
                                                        {% endfor %}

                                                    </select>

                                                    <input type="hidden" id="cust_state" value="" readonly >

                                                    <input type="hidden" id="company_state" value="{{company.state}}" readonly>

                                                </div>
                                                <div class="input-container col-2">
                                                    <a class="btn btn-warning text-right my-sm-0 my-2 px-3 py-2 flex-sm-row"
                                                        role="button" data-toggle="modal" data-target="#customerModal"
                                                        data-toggle="tooltip" href="">
                                                        <i class="fa fa-plus fs-4"></i>
                                                    </a>
                                                </div>
                                            </div>
                                            <script>
                                                $(document).ready(function () {
                                                    $("#SelectCustomer").change(function () {
                                                        var customerID = $(this).val();

                                                        // Make an AJAX request to the backend to fetch vendor details
                                                        $.ajax({
                                                            url: '/get_customer_details/' + customerID + '/',
                                                            type: 'GET',
                                                            success: function (data) {
                                                                // Update the placeholder elements with the fetched details
                                                                $("#customerEmail").val(data.email);
                                                                $("#GSTTypeCustomer").val(data.GSTTypeCustomer);
                                                                $("#gstnum").val(data.gstnum);
                                                                $("#srcofsupply").val(data.plsupply);

                                                                var placeOfSupplyDropdown = $("#PlaceOfSupplyCustomer");

                                                                // Append options from data.placeofsupply
                                                                var option = $('<option>', { value: data.placeofsupply, text: data.placeofsupply });

                                                                // Set the 'selected' attribute if the option matches the selectedPlaceOfSupply
                                                                option.prop('selected', true);

                                                                placeOfSupplyDropdown.append(option);


                                                            },
                                                            error: function (error) {
                                                                console.log(error);
                                                            }
                                                        });
                                                    });
                                                });
                                            </script>
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">EMAIL</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="text" class="form-control"
                                                        name="customerEmail" id="customerEmail" required>
                                                </div>
                                            </div>
                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">GST TYPE</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="text" class="form-control"
                                                        name="GSTTypeCustomer" id="GSTTypeCustomer" required>
                                                </div>
                                            </div>

                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">GST NUMBER</label>
                                                </div>
                                                <div class="input-container col-sm-6">
                                                    <input type="text" class="form-control"
                                                        name="gstnum" id="gstnum" required>
                                                </div>
                                            </div>

                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="srcofsupply">PLACE OF SUPPLY</label>
                                                </div>
                                                <div class=" input-container col-sm-6">
                                                    <select name="srcofsupply" id="srcofsupply"
                                                        class="form-control">
                                                        <option value="value" selected disabled>Choose Place Of Supply
                                                        </option>
                                                        <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman
                                                            And Nicobar Islands</option>
                                                        <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                                                        <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh
                                                        </option>
                                                        <option value="volvo">[AS]-Assam</option>
                                                        <option value="[BR]-Bihar">[BR]-Bihar</option>
                                                        <option value="volvo">[CH]- Chandhigarh</option>
                                                        <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                                                        <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                                                        <option value="volvo">[DL]- Delhi</option>
                                                        <option value="[GA]-Goa">[GA]-Goa</option>
                                                        <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                                                        <option value="[HR]-Haryana">[HR]-Haryana</option>
                                                        <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh
                                                        </option>
                                                        <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir
                                                        </option>
                                                        <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                                                        <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                                                        <option value="[KL]-Kerala">[KL]-Kerala</option>
                                                        <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                                                        <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                                                        <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                                                        <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                                                        <option value="[MN]-Manipur">[MN]-Manipur</option>
                                                        <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                                                        <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                                                        <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                                        <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                                        <option value="[OD]-Odisha">[OD]-Odisha</option>
                                                        <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                                                        <option value="[PB]-Punjab">[PB]-Punjab.</option>
                                                        <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                                                        <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                                                        <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                                                        <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                                                        <option value="[TR]-Tripura">[TR]-Tripura</option>
                                                        <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                                                        <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                                                        <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                                                        <option value="[OT]-Other Territory">[OT]-Other Territory
                                                        </option>
                                                    </select>
                                                </div>

                                            </div>

                                            <script>
                                                $(document).ready(function () {
                                                    $("#srcofsupply").change(function () {
                                                        var newPlaceOfSupply = $(this).val();
                                                        var customerId = $("#SelectCustomer").val();

                                                        // Get the CSRF token
                                                        var csrfToken = "{{ csrf_token }}";

                                                        // Make an AJAX request to update the place of supply in the database
                                                        $.ajax({
                                                            url: '/update_place_of_supply_customer/',
                                                            type: 'POST',
                                                            data: {
                                                                customer_id: customerId,
                                                                place_of_supply: newPlaceOfSupply,
                                                                csrfmiddlewaretoken: csrfToken  // Include the CSRF token
                                                            },
                                                            success: function (response) {
                                                                console.log(response);
                                                            },
                                                            error: function (error) {
                                                                console.log(error);
                                                            }
                                                        });
                                                    });
                                                });
                                            </script>


                                            <div class="row pb-3">
                                                <div class="col-2">
                                                    <label for="">PAYMENT TYPE</label>
                                                </div>
                                                <div class=" input-container col-sm-6">
                                                    <select name="paymentType" id="paymentType"
                                                        class="form-control ">
                                                        <option value="">Select Payment Method</option>
                                                        <option value="Cash">CASH</option>
                                                        <option value="Cheque">CHEQUE</option>
                                                        <option value="UPI">UPI</option>
                                                        {% for b in bank %}
                                                        <option value="{{b.id}}">{{b.bank_name}}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                                <BR>

                                                <div class="col-md-5" id="bankAccount" style="display: none;">
                                                    <label for="">Bank Account</label>
                                                    <input type="text" class="form-control" name="bankAccount">
                                                </div>
                                                <div class="col-md-8" id="Cheque" style="display: none;">
                                                    <label for="">CHEQUE</label>
                                                    <input type="text" class="form-control" name="Cheque">
                                                </div>
                                                <div class="col-md-8" id="UPI" style="display: none;">
                                                    <label for="">UPI</label>
                                                    <input type="text" class="form-control" name="UPI">
                                                </div>
                                            </div>

                                            <script>
                                                $(document).ready(function () {
                                                    // Event listener for dropdown change
                                                    $('#paymentType').on('change', function () {
                                                        // Get the selected payment method
                                                        var payment = $('#paymentType').val();

                                                        // Show the selected payment method div
                                                        if (payment === '' || payment === 'Cash') {
                                                            $('#bankAccount').hide();
                                                            $('#Cheque').hide();
                                                            $('#UPI').hide();
                                                        } else if (payment === 'Cheque') {
                                                            $('#bankAccount').hide();
                                                            $('#Cheque').show();
                                                            $('#UPI').hide();
                                                        } else if (payment === 'UPI') {
                                                            $('#bankAccount').hide();
                                                            $('#Cheque').hide();
                                                            $('#UPI').show();
                                                        } else {
                                                            $('#bankAccount').show();
                                                            $('#Cheque').hide();
                                                            $('#UPI').hide();
                                                        }
                                                    });
                                                });

                                            </script>
                                            <br>

                                            <hr class="text-warning font-weight-bold"><br>
                                            <div class="table-responsive">
                                                <table class="table table-bordered text-white" id="tab_logic">
                                                    <thead>
                                                        <tr>
                                                            <th class="text-center">Sl.No.</th>
                                                            <th class="text-center">Item Details<br>
                                                              </th>
                                                            <th class="text-center">HSN</th>
                                                            <th class="text-center">Quantity</th>
                                                            <th class="text-center">Rate</th>
                                                            <th class="text-center">Tax(%)</th>
                                                            <th class="text-center">Discount</th>
                                                            <th class="text-center">Amount</th>
                                                            <th class="text-center">Action</th>


                                                        </tr>
                                                    </thead>
                                                    <tbody id="items-table-body">
                                                        <tr id='addr0' class='addr'>
                                                            <td style="color: white;"><span id="slnum0"
                                                                    class="slnum">1</span></td>
                                                            <td>
                                                                <div class="d-flex">

                                                                    <select name='item[]' id='item0'
                                                                        class="form-control item text-black border-0 px-4 select2 selectpicker text-center rounded-2 py-0"
                                                                        data-live-search="true"
                                                                        style="color: black; background-color: white;"
                                                                        onchange="showRate(this.id,this.value)">
                                                                        <option value="" selected hidden>Select
                                                                        </option>
                                                                        {% for i in item_obj %}

                                                                        <option value="{{ i.id }}">{{ i.item_name }}
                                                                        </option>

                                                                        {% endfor %}
                                                                    </select>

                                                                    <a class="btn btn-warning text-right my-sm-0 my-2 px-3 py-2 flex-sm-row"
                                                                 role="button" data-toggle="modal" data-target="#create_item"
                                                                 data-toggle="tooltip" href="">
                                                                <i class="fa fa-plus fs-4"></i></a>
                                                                    

                                                                </div>

                                                                

                                                            </td>

                                                            <td style="width: 80px;">
                                                                <input type="text" value="0" name='HSN[]' id="HSN0"
                                                                    placeholder='HSN'
                                                                    class=" bg-transparent border-0 text-white text-right HSN bg-light"
                                                                    style="width: 52px;" />
                                                            </td>

                                                            <td>
                                                                <input type="number" name='qty[]' id="qty0" value='0'
                                                                    class="bg-transparent border-0 text-white text-right qty text-dark bg-light"
                                                                    step=0 min=0/ style="width: 50px;"> <br>
                                                                <span class="text-warning">Available Stock : <span
                                                                        id="stock_data0"
                                                                        class="text-warning stock_data"></span></span>
                                                                <input type="text" hidden class="stock_data_hidden"
                                                                    name="stock[]" id="stock_data_hidden0" value="0" />
                                                            </td>
                                                            <td>
                                                                <input type="text" name='rate[]' id="rate0" value='0.00'
                                                                    class="bg-transparent border-0 text-white text-right rate text-dark bg-light"
                                                                    style="width: 70px;" />
                                                            </td>
                                                            <td>
                                                                <input type="hidden" id="tax_total0"
                                                                    class="form-control mb-2 d-none"
                                                                    style="width: 100px;">
                                                                <input type="text" placeholder="Select TAX"
                                                                    class="form-control selecttax text-dark bg-light"
                                                                    id="selecttax0" style="width: 100px;">
                                                                <select name="tax1[]" id="intra_tax0"
                                                                    class="form-control tax1 d-none mb-2 text-dark bg-light"
                                                                    style="width: 80px;">
                                                                    <option id="ta1" value=0 text=' '>Choose GST
                                                                    </option>
                                                                    <option value=28 text="{{ cmp1.state }}">28.0% GST
                                                                    </option>
                                                                    <option value=18 text="{{ cmp1.state }}">18.0% GST
                                                                    </option>
                                                                    <option value=12 text="{{ cmp1.state }}">12.0% GST
                                                                    </option>
                                                                    <option value=5 text="{{ cmp1.state }}">05.0% GST
                                                                    </option>
                                                                    <option value=3 text="{{ cmp1.state }}">03.0% GST
                                                                    </option>
                                                                    <option value=0 text="{{ cmp1.state }}">0.0% GST
                                                                    </option>
                                                                </select>

                                                                <select name="tax2[]" id="inter_tax0"
                                                                    class="form-control tax2 d-none mb-2 text-dark bg-light"
                                                                    style="width: 80px;">
                                                                    <option id="ta5" value=0 text=" ">Choose IGST
                                                                    </option>
                                                                    <option value=28 text="{{ cmp1.state }}">28.0% IGST
                                                                    </option>
                                                                    <option value=18 text="{{ cmp1.state }}">18.0% IGST
                                                                    </option>
                                                                    <option value=12 text="{{ cmp1.state }}">12.0% IGST
                                                                    </option>
                                                                    <option value=5 text="{{ cmp1.state }}">05.0% IGST
                                                                    </option>
                                                                    <option value=3 text="{{ cmp1.state }}">03.0% IGST
                                                                    </option>
                                                                    <option value=0 text="{{ cmp1.state }}">0.0% IGST
                                                                    </option>
                                                                </select>
                                                            </td>
                                                            <td>
                                                                <input type="text" name='discount[]' id="disc0"
                                                                    value='0'
                                                                    class="bg-transparent border-0 text-white text-right disc text-dark bg-light"
                                                                    step="0" min="0" style="width: 60px;" />
                                                            </td>

                                                            <td>
                                                                <input type="text" name='amount[]' value='0.00'
                                                                    id="amount0"
                                                                    class="bg-transparent border-0 text-white text-right amount text-dark bg-light"
                                                                    step="0.00" min="0" style="width: 60px;" />
                                                            </td>
                                                            <td>
                                                                <button type="button" id="0"
                                                                    class="btn btn-light font-weight-bold clone_row fa fa-clone px-1 my-1 py-1 mx-1"
                                                                    data-toggle="tooltip" data-placement="bottom"
                                                                    tooltip="Clone"  style = "width:25px; height: 25px; border-radius: 90% ">
                                                                </button>
                                                                <br>
                                                                <button type="button" id="0"
                                                                    class="btn btn-danger remove_row fa fa-close px-1 my-1 py-1 mx-1"
                                                                    style = "width:25px; height: 25px; border-radius: 90% "
                                                                    data-toggle="tooltip" data-placement="bottom"
                                                                    tooltip="Remove" >
                                                                </button>
                                                            </td>

                                                        </tr>
                                                    </tbody>
                                                    
                                                       
                                                        
                                                    
                                                </table>

                                                <a
                                                class="btn btn-outline-secondary ml-1 mb-3 text-capitalize"
                                                role="button" id="add" title="Add Another Line">+</a>
                                            </div>
                                        </div>
                                    </div>
                                   

<hr>
                                    <div class="row clearfix" >
                                        <div class="col-md-5 mt-2 p-3 mx-5">
                                          <label for="">Note</label>
                                          <div class="form-row">
                                            <textarea class="form-control" name="note" rows="15" style="height: 200px;"></textarea>
                                          </div><br>
                                          <div>
                                            <input type="file" class="form-control" name="file">
                                          </div>
                                          <div>
                                          </div>
                                        </div>
                                        <div class="col-md-5 table-responsive-md mt-3 ml-5 mr-0 p-2" id="tab_logic_total" style="background-color:rgba(5, 5, 5, 0.4); border: 1px solid rgb(255, 255, 255);"><br>
                                          <div class="row container-fluid p-2 m-0">
                                            <div class="col-sm-5 mt-2">
                                              <label for="a" class="text-center">Sub Total</label>
                                            </div>
                                            <div class="col-sm-3 mt-2"></div>
                                            <div class="col-sm-4 mt-2">
                                              <input type="number" step="any" name='subtotal' placeholder=0  step="0.00" min="0"
                                                class="form-control bg-black" id="subtotal" readonly style="background-color: #000000;border: 1px solid #ffffff;">
                                            </div>
                                          </div>
                                          
                                          <div class="row container-fluid p-2 m-0 d-none" id="igst1">
                                            <div class="col-sm-5 mt-2"><label for="a" class="text-center">IGST</label></div>
                                            <div class="col-sm-3 mt-2"></div>
                                            <div class="col-sm-4 mt-2"><input type="number" name='igst' step="0.00" min="0" id="igst" placeholder=0 
                                                class="form-control bg-black" readonly style="background-color: #000000;border: 1px solid #ffffff;"/>
                                            </div>
                                          </div>
                                          <div class="row container-fluid p-2 m-0 d-none" id="cgst1">
                                            <div class="col-sm-5 mt-2"><label for="a" class="text-center">CGST</label></div>
                                            <div class="col-sm-3 mt-2"></div>
                                            <div class="col-sm-4 mt-2"><input type="number" name='cgst' step="0.00" min="0" id="cgst" placeholder=0 
                                                class="form-control bg-black" readonly style="background-color: #000000;border: 1px solid #fdfdfd;"/>
                                            </div>
                                          </div>
                                          <div class="row container-fluid p-2 m-0 d-none" id="sgst1">
                                            <div class="col-sm-5 mt-2"><label for="a" class="text-center">SGST</label></div>
                                            <div class="col-sm-3 mt-2"></div>
                                            <div class="col-sm-4 mt-2"><input type="number" name='sgst' step="0.00" min="0" id="sgst" placeholder=0 
                                                class="form-control bg-black" readonly style="background-color: #070707;border: 1px solid #ffffff;"/>
                                            </div>
                                          </div>
                                          <div class="row container-fluid p-2 m-0" id="tax_amount">
                                            <div class="col-sm-5 mt-2"><label for="a" class="text-center">Tax Amount</label></div>
                                            <div class="col-sm-3 mt-2"></div>
                                            <div class="col-sm-4 mt-2"><input type="number" id="total_taxamount" name="total_taxamount"step="0.00" min="0" placeholder=0 value="0"
                                                class="total_taxamount form-control bg-black" readonly  style="background-color: #000000;border: 1px solid #ffffff;"/>
                                            </div>
                                          </div>
                                
                                          <div class="row container-fluid p-2 m-0">
                                            <div class="col-sm-5 mt-0">
                                              <label for="addcharge" class="text-right">Shipping Charges</label>
                                            </div>
                                            <div class="col-sm-3 mt-2">
                                            </div>
                                            <div class="col-sm-4 mt-2">
                                              <input type="number" name='addcharge' tep="0.00"   id="addcharge" placeholder=0 
                                              class="form-control bg-black"/>
                                            </div>
                                          </div>
                                
                                          <div class="row container-fluid p-2 m-0">
                                            <div class="col-sm-5 mt-2"><label class="text-right" >Adjustment</label></div>
                                            <div class="col-sm-3 mt-2">
                                            </div>
                                            <div class="col-sm-4 mt-2">
                                              <input type="number" name='add_round_off' value="0" step="any" id="add_round_off" placeholder=0 class="form-control bg-black">
                                            </div>
                                          </div><hr>
                                                 
                                          <div class="row container-fluid  p-2 m-0">
                                            <div class="col-sm-5 mt-2"><label for="a" class="text-center" id="grandtotallbl">Grand Total</label></div>
                                            <div class="col-sm-2 mt-2"></div>
                                            <div class="col-sm-5 mt-2"><input type="number" name='grand_total' id="grandtotal" placeholder="0" step="0.00" min="0"
                                                class="form-control bg-black" readonly>
                                            </div>
                                          </div><hr>
                                
                                          <div class="row container-fluid  p-2 m-0">
                                            <div class="col-sm-5 mt-2"><label for="a" class="text-center" id="Paid">Paid</label></div>
                                            <div class="col-sm-2 mt-2"></div>
                                            <div class="col-sm-5 mt-2"><input type="number" name='amtPaid' value="0" id="amtPaid" placeholder="0" step="0.00" min="0"
                                                class="form-control bg-black">
                                            </div>
                                          </div>
                                
                                          <div class="row container-fluid  p-2 m-0">
                                            <div class="col-sm-5 mt-2"><label for="a" class="text-center" id="bal_ance">Balance</label></div>
                                            <div class="col-sm-2 mt-2"></div>
                                            <div class="col-sm-5 mt-2"><input type="number" readonly name='balance_amt' value="0" id="balanceam_t" placeholder="0" step="0.00" min="0"
                                                class="form-control bg-black">
                                            </div>
                                          </div>
                                        </div>   
                                      </div>
                                      <div class="row mt-5 mb-3">
                                        
                                        <div class="col-md-4">
                                          <div class="d-flex">
                                            <!-- <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4 mt-2 py-2" aria-label="Close" id="cancelButton">CANCEL</button>
                                            <input type="submit" class="btn save_btn mt-2 py-2 rounded-pill text-grey w-50 my-4 mx-2" style="width: 200px; text-align: center ;" value="SAVE CHANGES" id="save">
                                            <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4 mt-2 py-2" aria-label="Close" id="cancelButton">CANCEL</button> -->
                                            <input type="submit" class="btn text-white mt-5" style="background-color:  rgb(59, 59, 58) ; "
                                            onclick="saveAsDraftDialog()" value="SAVE AS DRAFT"> &nbsp;
                                        <input type="submit" class="btn text-white mt-5" style="background-color: rgb(210, 132, 30) ; "
                                            value="SAVE CHANGES"> &nbsp;
                                        <input type="submit" class="btn text-white mt-5" style="background-color:  rgb(59, 59, 58) ; "
                                            onclick="cancelDialog()" value="Cancel">
                                            
                                          </div>
                                        </div>
                                        <div class="col-md-4"></div>
                                        <div class="col-md-4"></div>
                                      </div>
                                </form>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- -----------------------------NEW VENDOR MODAL--------------- -->

<div class="modal fade" id="newvendor">
    <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(0, 0, 0);border-radius: 20px;">
            <div class="modal-header " style="background: rgb(0, 0, 0);">
                <h3 class="m-3 text-uppercase text-white">New Vendor</h3>
                <button type="button" class="close px-2" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="background: rgb(2, 2, 2);">
                <div class="card p-3 m-3 bg-black">
                    <form method="post" action="{% url 'add_vendor_bill' %}" enctype="multipart/form-data" class="mb-3">
                        {% csrf_token %}

                        <div class=" form-group row">
                            <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                <label>Primary Contact</label>
                            </div>
                            <div class="col-sm-12 col-md-1 col-lg-1">
                                <select id="select1" name="salutation" class="form-control bg-light text-dark mt-2 ">

                                    <option value="Mr">Mr</option>
                                    <option value="Mrs">Mrs</option>
                                    <option value="Ms">Ms</option>
                                    <option value="Dr">Dr</option>

                                </select>
                            </div>
                            <div class="col-sm-12 col-md-2 col-lg-3">
                                <input type="text" class="form-control bg-light text-dark mt-2 change-disply "
                                    id="fname" name="first_name" placeholder="first name" required>

                            </div>
                            <div class="col-sm-12 col-md-2 col-lg-3">
                                <input type="text" class="form-control bg-light text-dark mt-2 " id="lname"
                                    name="last_name" placeholder="last name" required>

                            </div>
                        </div>

                        <div class="form-group row mt-4">
                            <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                <label>Company Name</label>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-7">
                                <input type="text" class="form-control bg-light text-dark " name="company_name"
                                    required>
                                <div class="invalid-feedback">Please fill out this field.</div>

                            </div>
                        </div>



                        <div class="form-group row mt-4">
                            <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Vendor Display Name</label>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-7">

                                <select class="form-control bg-light text-dark " name="v_display_name"
                                    id="v_display_name">

                                </select>



                            </div>
                        </div>

                        <div class="form-group row mt-4">
                            <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Vendor Email</label></div>
                            <div class="col-sm-12 col-md-6 col-lg-7">
                                <input type="email" class="form-control bg-light text-dark" name="vendor_email"
                                    id="vendor-email" required>
                                <span class=" text-danger mt-1" id="email-message-ids" style="font-size: 10px;"></span>

                            </div>


                        </div>

                        <div class="form-group row mt-4">
                            <div class="col-sm-12 col-md-3 col-lg-3 ">
                                <label class="col-form-label text-white"> Vendor phone</label>
                            </div>
                            <div class="col-sm-12 col-md-3 col-lg-3">
                                <input id="workphone" type="text" class="form-control bg-light text-dark mt-2"
                                    pattern="[0-9]{7}" name="w_phone" placeholder="work phone" required>
                                <span id="work-phone-message" class="mt-2 " style="font-size: 10px;"></span>
                                <span id="workphone_label" class="mt-2 text-danger" style="font-size: 10px;"></span>
                                <div class="invalid-feedback"></div>

                            </div>
                            <div class=" col-sm-12 col-md-3 col-lg-4">
                                <input id="mphone" type="text" pattern="[0-9]{10}"
                                    class="form-control bg-light text-dark mt-2" name="m_phone"
                                    placeholder="mobile number" required>
                                <span id="phone-message" class="mt-2 " style="font-size: 10px;"></span>
                                <span id="mphone_label" class="mt-2 text-danger" style="font-size: 10px;"></span>
                                <div class="invalid-feedback"></div>

                            </div>

                            <hr style="border: none; height: 2px; background-color: #ffcc00; margin: 20px 0;">

                            <div class="toggle1 section-toggle">
                                <a href="">More Details</a>

                            </div>


                        </div>


                        <fieldset1 id="more_detail" class="more details" style="display: none;">

                            <div class="form-group row mt-4">
                                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                    <label>Skype name/Number</label>
                                </div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <input type="text" class="form-control bg-light text-dark" name="skype_number">
                                </div>

                            </div>

                            <div class="form-group row mt-4">
                                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                    <label>Designation</label>
                                </div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <input type="text" class="form-control bg-light text-dark" name="designation">
                                </div>

                            </div>

                            <div class="form-group row mt-4">
                                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                    <label>Department</label>
                                </div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <input type="text" class="form-control bg-light text-dark" name="department">
                                </div>

                            </div>



                            <div class="form-group row mt-4">
                                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <input id="web" type="text" class="form-control bg-light text-dark"
                                        onclick="mobile_phone()" name="website">
                                </div>
                            </div>
                        </fieldset1>


                        <hr style="border: none; height: 2px; background-color: #ffcc00; margin: 20px 0;">

                        <div class="section-3">

                            <div class="toggle2 section-toggle"> <a href="">Other Details </a> </div>
                            <div class="toggle3 section-toggle"> <a href="">Address </a> </div>
                            <div class="toggle4 section-toggle"><a href="">Contact Persons </a></div>
                            <div class="toggle7 section-toggle"><a href="">Remarks</a></div>

                        </div>


                        <fieldset2 class="other details">

                            <div class="form-group row mt-2">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> GST
                                    Treatment*</label>

                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="gst" id="GSTT" class="form-control bg-light text-dark"
                                        onclick="gstPan_function()">
                                        <option value="Select a Gst Treatment" selected>Select a Gst Treatment</option>
                                        <option
                                            value="Registered Business-Regular Business that is registered under GST">
                                            Registered Business-Regular Business that is registered under GST</option>
                                        <option
                                            value="Registered Business-Composition Business that is registered under the Composition scheme in GST">
                                            Registered Business-Composition Business that is registered under the
                                            Composition schemen in GST
                                        </option>
                                        <option value="Unregistered Business-not Registered under GST">Unregistered
                                            Business-not Registered under GST</option>
                                        <option
                                            value="Overseas- Persons with who you do import or exports of supplies outside india">
                                            Overseas- Persons with who you do import or exports of supplies outside
                                            india</option>
                                        <option value="Special Economic Zone">Special Economic Zone</option>
                                    </select><br>
                                </div>


                            </div>

                            <fieldset3 id="gst" style="display: none;">
                                <div class="row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                        GSTIN/UIN*</label>

                                    <div class=" col-sm-12 col-md-3 col-lg-3">
                                        <input type="text" class="form-control bg-light text-dark" name="gst_number"
                                            id="gstInput" placeholder="11ABCDE1234F5Z6">
                                        <span id="gstMessage"></span>

                                    </div>


                                </div>

                            </fieldset3>

                            <fieldset4 id="pan" style="display: none;">
                                <div class=" row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> PAN</label>

                                    <div class=" col-sm-12 col-md-3 col-lg-3">
                                        <input type="text" class="form-control bg-light text-dark" id="panInput"
                                            name="pan_number" placeholder="ABCDE1234D">
                                        <span id="panMessage"></span>


                                    </div>


                                </div>

                            </fieldset4>


                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Source Of
                                    Supply*</label>

                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="source_supply" id="PLACE" class="form-control bg-light text-dark">
                                        <option value="value" selected></option>
                                        <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar
                                            Islands</option>
                                        <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                                        <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh </option>
                                        <option value="volvo">[AS]-Assam</option>
                                        <option value="[BR]-Bihar">[BR]-Bihar</option>
                                        <option value="volvo">[CH]- Chandhigarh</option>
                                        <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                                        <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                                        <option value="volvo">[DL]- Delhi</option>
                                        <option value="[GA]-Goa">[GA]-Goa</option>
                                        <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                                        <option value="[HR]-Haryana">[HR]-Haryana</option>
                                        <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                                        <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option>
                                        <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                                        <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                                        <option value="[KL]-Kerala">[KL]-Kerala</option>
                                        <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                                        <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                                        <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                                        <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                                        <option value="[MN]-Manipur">[MN]-Manipur</option>
                                        <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                                        <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                                        <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                        <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                        <option value="[OD]-Odisha">[OD]-Odisha</option>
                                        <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                                        <option value="[PB]-Punjab">[PB]-Punjab.</option>
                                        <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                                        <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                                        <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                                        <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                                        <option value="[TR]-Tripura">[TR]-Tripura</option>
                                        <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                                        <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                                        <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                                        <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                                    </select>
                                </div>


                            </div>

                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Currency*</label>

                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="currency" id="PLACE" class="form-control bg-light text-dark">
                                        <option value="Indian Rupee" selected>Indian Rupee</option>
                                        <option value="Indian Rupee">Indian Rupee</option>

                                    </select>
                                </div>


                            </div>

                            <div class="form-group row mt-2">
                                <div class="col-sm-12 col-md-3 col-lg-3 ">
                                    <label class="col-form-label text-white mb-3"> Opening Balance Type</label>
                                </div>
                                <div class="col-sm-12 col-md-3 col-lg-4 d-flex align-items-center">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="op_type" id="debit"
                                            value="debit">
                                        <label class="form-check-label text-white" for="debit">Debit</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="op_type" id="credit"
                                            value="credit">
                                        <label class="form-check-label text-white" for="credit">Credit</label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Opening Balance
                                    Amount</label>
                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <input type="number" class="form-control bg-light text-dark" name="opening_bal"
                                        value="0.00">
                                </div>
                            </div>

                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Payment
                                    Terms</label>

                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="payment_terms" id="paytearm-select"
                                        class="form-control bg-light text-dark">


                                        {% for pay_terms in payment %}
                                        <option value="{{pay_terms.id}}">{{pay_terms.term_name}}</option>
                                        {% endfor %}

                                    </select>

                                </div>

                                <div class="col-md-4 ">
                                    <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment"
                                        data-toggle="modal"
                                        style="color: white; background-color: rgb(210, 132, 30);">+</a>
                                </div>





                            </div>


                        </fieldset2>


                        <!------------------ Address Section Start------------- -->

                        <fieldset5 id="adress" style="display: none;">
                            <div>
                                <div class="row">
                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <label for="">BILLING ADDRESS</label>
                                            </div>
                                            <div class="col"></div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Attention</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark"
                                                    name="battention" id="batten">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Country</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <select name="bcountry" id="btry"
                                                    class="form-control bg-light text-dark">
                                                    <option value="India" selected>India</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Address</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <textarea class="form-control bg-light "
                                                    style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4"
                                                    name="baddress" id="badd1"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                City</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark" name="bcity"
                                                    id="bcty">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                State</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark" name="bstate"
                                                    id="bste">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Zip
                                                Code </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="number" class="form-control bg-light text-dark" name="bzip"
                                                    id="bzp">
                                            </div>
                                        </div>

                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Phone
                                            </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input id="bphone_num" type="number"
                                                    class="form-control bg-light text-dark" name="bphone">
                                                <label for="" id="bphone_label"></label>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Fax
                                            </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="number" class="form-control bg-light text-dark"
                                                    onmouseout="fax_number()" onclick="bphone_number()" name="bfax"
                                                    id="bfx">

                                                <label for="" id="fax_label"></label>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <label for="">SHIPPING ADDRESS</label>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <input type="checkbox" id="myCheckT"
                                                    onclick="myCopyAddressFunction()">&nbsp;
                                                <label for="myCheck">Same as Billing Address:</label>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Attention</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark "
                                                    style="color: white;" name="sattention" id="satten">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Country</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <select name="s_country" id="sctry"
                                                    class="form-control bg-light text-dark">
                                                    <option value="India" selected>India</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Address</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <textarea class="form-control bg-light"
                                                    style="border: none;color: rgb(10, 10, 10);" id="sadd1" cols="26"
                                                    rows="4" name="saddress"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                City</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark" name="scity"
                                                    id="scty">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                State</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark" name="sstate"
                                                    id="sste">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Zip
                                                Code </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="number" class="form-control bg-light text-dark" name="szip"
                                                    id="szp">
                                            </div>
                                        </div>


                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Phone
                                            </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="tel" class="form-control bg-light text-dark"
                                                    pattern="[0-9]{10}" style="color: white;" name="sphone"
                                                    id="sphone_num">
                                                <label for="" id="sphone_label"></label>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Fax
                                            </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="tel" class="form-control bg-light text-dark"
                                                    pattern="[0-9]{7}" style="color: white;" name="sfax"
                                                    onclick="sphone_number()" onmouseout="sfax_number()" id="sfx">
                                                <label for="" id="sfax_label"></label>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </fieldset5>

                        <!---------------------Address  Section End -------------->


                        <!------------------ Contact Person Section Start------------- -->

                        <fieldset6 id="contact_person" style="display: none;">
                            <div class="row">
                                <div class="col-sm-12 ">

                                    <div class="table-responsive">

                                        <table id="tbl" class="table text-white"
                                            style="background-color: rgba(250, 227, 198, 0.5);">
                                            <thead>
                                                <tr>

                                                    <th>Salutation</th>
                                                    <th>First Name</th>
                                                    <th>Last Name</th>
                                                    <th>Email Address</th>
                                                    <th>Work Phone <br><span id="twph_label"></span></th>
                                                    <th>Mobile <br><span id="tlabel"></span> </th>
                                                    <th>Skype Name/No</th>
                                                    <th>Designation</th>
                                                    <th>Department</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><select name="salutation[]"
                                                            class="form-control bg-transparent border-1 text-white"
                                                            id="PLACE">
                                                            <option class="text-dark">Select</option>
                                                            <option class="text-dark" value="Mr">Mr.</option>
                                                            <option class="text-dark" value="Mrs">Mrs.</option>
                                                            <option class="text-dark" value="Ms">Ms.</option>
                                                            <option class="text-dark" value="Miss">Miss.</option>
                                                            <option class="text-dark" value="Dr">Dr.</option>
                                                        </select></td>
                                                    <td><input type="text"
                                                            class=" form-control border-1 bg-transparent text-white"
                                                            name="first_name[]"></td>
                                                    <td><input type="text"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            name="last_name[]" /></td>
                                                    <td>
                                                        <input type="text"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            name="email[]" />


                                                    </td>

                                                    <td>
                                                        <input type="tel" pattern="[0-9]{7}"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            id="twphone" name="wphone[]" />

                                                    </td>
                                                    <td>
                                                        <input type="tel" pattern="[0-9]{10}"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            id="tmobile" onclick="sample1()" name="mobile[]" />

                                                    </td>
                                                    <td><input type="number"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            onclick="sample()" name="skype[]" /></td>
                                                    <td><input type="text"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            name="designation[]" /></td>
                                                    <td><input type="text"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            name="department[]" /></td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>

                                    <div class="button add_another mt-3 ">
                                        <i class="fa fa-user-plus" aria-hidden="true"></i>
                                        <span class="text-small" style="margin-left: 0.30rem;">
                                            Add Contact Person
                                        </span>
                                    </div>


                                </div>

                            </div>

                        </fieldset6>

                        <!---------------------Contact Person Section End -------------->


                        <!------------------ Remark Section Start------------- -->

                        <fieldset7 class="remarks" style="display: none;">
                            <div class="row">
                                <div class="col-sm-12 col-md-8 col-lg-8">
                                    <div class="form-group row mt-4">
                                        <div class=" col-sm-12 col-md-6 col-lg-6">
                                            <textarea class="bg-light w-100" style="border: none;color: rgb(5, 5, 5);"
                                                rows="5" name="remark"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12 col-md-2 col-lg-2"></div>
                            </div>

                        </fieldset7>

                        <!---------------------Remark Section End -------------->

                        <div class="row mt-5">
                            <div class="col-sm-12 col-md-2 col-lg-2 mt-3">
                                <button type="submit" class="btn btn-outline-warning form-control bg-warning text-dark"
                                    style="font-weight: bold;">Save</button>

                            </div>

                            <div class=" col-sm-12 col-md-2 col-lg-2 mt-3">
                                <button type="reset" class="form-control  bg-warning text-dark"
                                    style="font-weight: bold;">Cancel</button>

                            </div>


                        </div>



                    </form>

                </div>
            </div>
        </div>
    </div>
</div>
<!-- --------------------------------END NEW VENDOR MODAL---------------------------------------- -->

<!--------------- Payments Seciton Start ----------------->

<div class="modal fade" id="newpayment">
    <div class="modal-dialog modal-md">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
            <div class="modal-header " style="background: rgb(32, 35, 37);">
                <h3 class="m-3 text-uppercase" style="color: white;">Add Payment Term</h3>
                <button type="button" class="close btn btn-danger" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="background: rgb(32, 35, 37);">
                <div class="card p-3 m-3" style="background-color: #141414a2;">
                    <form action="" method="post" class="needs-validation" novalidate autocomplete="off"
                        id="modalPayment_terms">



                        <div class="row mt-2">

                            <div class="col-lg-12 col-md-12 col-sm-12 mt-2">
                                <label for="termname" style="color: white">Term Name *</label>

                                <input type="text " class="form-control text-dark bg-light mt-2" id="tname"
                                    name="term_name" autocapitalize="characters" required>
                                <span id="message-id" class="mt-1 text-danger" style="font-size: 10px;"></span>
                                <span id="success-message-id" class=" mt-1 text-success"
                                    style="font-size: 10px;"></span>
                            </div>

                            <div class="col-lg-12 col-md-12 col-sm-12 mt-2">
                                <label for="termdays" style="color: white">Number of Days *</label>

                                <input type="number" class="form-control text-dark bg-light mt-2" id="tdays"
                                    name="term_days" autocapitalize="characters" required>
                            </div>
                            <div class="col-md-2 mt-2"></div>

                        </div>

                        <div class="row mt-5">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <div class="d-flex">
                                    <button
                                        class="btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning "
                                        type="submit" data-dismiss="modal" id="termSave">Save
                                    </button>


                                    <button type="button"
                                        class="close btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning"
                                        data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">Cancel</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!------------------- Payments  Section End -------------->

<!-- -----------------------Customer modal--------------------- -->

<div class="modal fade" id="customerModal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(0, 0, 0);border-radius: 20px;">
            <div class="modal-header " style="background: rgb(0, 0, 0);">
                <h3 class="m-3 text-uppercase text-white">New Customer</h3>
                <button type="button" class="close px-2" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="background: rgb(2, 2, 2);">
                <div class="card p-3 m-3 bg-black">
                    <form method="post" action="{% url 'add_customer_bill' %}" enctype="multipart/form-data"
                        class="mb-3">
                        {% csrf_token %}

                        <div class="form-group row mt-4">
                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color: white;">Customer
                                Type</label>

                            <div class=" col-sm-12 col-md-3 col-lg-3">
                                <input type="radio" value="Business" name="type">
                                <label for="Business"> Business</label>
                                &nbsp;&nbsp;&nbsp;
                                <input type="radio" value="Individual" name="type">
                                <label for="Business">Individual</label>
                            </div><br>
                        </div>



                        <div class=" form-group row">
                            <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                <label>Primary Contact</label>
                            </div>
                            <div class="col-sm-12 col-md-1 col-lg-1">
                                <select id="select1C" name="salutation" class="form-control bg-light text-dark mt-2 ">

                                    <option value="Mr">Mr</option>
                                    <option value="Mrs">Mrs</option>
                                    <option value="Ms">Ms</option>
                                    <option value="Dr">Dr</option>

                                </select>
                            </div>
                            <div class="col-sm-12 col-md-2 col-lg-3">
                                <input type="text" class="form-control bg-light text-dark mt-2 change-disply "
                                    id="ftname" name="first_name" placeholder="first name" required>

                            </div>
                            <div class="col-sm-12 col-md-2 col-lg-3">
                                <input type="text" class="form-control bg-light text-dark mt-2 " id="ltname"
                                    name="last_name" placeholder="last name" required>

                            </div>
                        </div>

                        <div class="form-group row mt-4">
                            <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Customer Display Name</label>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-7">

                                <select class="form-control bg-light text-dark " name="v_display_name"
                                    id="v_display_names">

                                </select>



                            </div>
                        </div>

                        <script>
                            const Ttle = document.getElementById('select1C');
                            const ftname = document.getElementById('ftname');
                            const ltname = document.getElementById('ltname');
                            const vDisplayNames = document.getElementById('v_display_names');

                            Ttle.addEventListener('input', updateOutputFields);
                            ftname.addEventListener('input', updateOutputFields);
                            ltname.addEventListener('input', updateOutputFields);

                            // Function to update the output fields
                            function updateOutputFields() {
                                const selectedTitle = Ttle.value;
                                const selectedFname = ftname.value;
                                const selectedLname = ltname.value;

                                // Clear existing options
                                vDisplayNames.innerHTML = '';
                                // Add new options based on input field values
                                const option1 = document.createElement('option');
                                option1.text = selectedTitle + ' ' + selectedFname + ' ' + selectedLname;
                                vDisplayNames.add(option1);



                                const option2 = document.createElement('option');
                                option2.text = selectedFname + ' ' + selectedLname;
                                vDisplayNames.add(option2);

                                const option3 = document.createElement('option');
                                option3.text = selectedLname + ' ' + selectedFname;
                                vDisplayNames.add(option3);
                            }

                        </script>


                        <div class="form-group row mt-4">
                            <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                <label>Company Name</label>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-7">
                                <input type="text" class="form-control bg-light text-dark " name="company_name"
                                    required>
                                <div class="invalid-feedback">Please fill out this field.</div>

                            </div>
                        </div>





                        <div class="form-group row mt-4">
                            <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Customer Email</label></div>
                            <div class="col-sm-12 col-md-6 col-lg-7">
                                <input type="email" class="form-control bg-light text-dark" name="vendor_email"
                                    id="customer-email" required>
                                <span class=" text-danger mt-1" id="email-message-ids" style="font-size: 10px;"></span>

                            </div>


                        </div>

                        <div class="form-group row mt-4">
                            <div class="col-sm-12 col-md-3 col-lg-3 ">
                                <label class="col-form-label text-white">Customer phone</label>
                            </div>
                            <div class="col-sm-12 col-md-3 col-lg-3">
                                <input id="workphones" type="text" class="form-control bg-light text-dark mt-2"
                                    pattern="[0-9]{7}" name="w_phone" placeholder="work phone" required>
                                <span id="work-phone-messages" class="mt-2 " style="font-size: 10px;"></span>
                                <span id="workphone_labels" class="mt-2 text-danger" style="font-size: 10px;"></span>
                                <div class="invalid-feedback"></div>

                            </div>
                            <div class=" col-sm-12 col-md-3 col-lg-4">
                                <input id="mphones" type="text" pattern="[0-9]{10}"
                                    class="form-control bg-light text-dark mt-2" name="m_phone"
                                    placeholder="mobile number" required>
                                <span id="phone-messages" class="mt-2 " style="font-size: 10px;"></span>
                                <span id="mphone_labels" class="mt-2 text-danger" style="font-size: 10px;"></span>
                                <div class="invalid-feedback"></div>

                            </div>

                            <hr style="border: none; height: 2px; background-color: #ffcc00; margin: 20px 0;">

                            <div class="toggle11 section-toggle">
                                <a href="">Add More Details</a>

                            </div>


                        </div>


                        <fieldset11 id="more_detail" class="more details" style="display: none;">

                            <div class="form-group row mt-4">
                                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                    <label>Skype name/Number</label>
                                </div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <input type="text" class="form-control bg-light text-dark" name="skype_number">
                                </div>

                            </div>

                            <div class="form-group row mt-4">
                                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                    <label>Designation</label>
                                </div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <input type="text" class="form-control bg-light text-dark" name="designation">
                                </div>

                            </div>

                            <div class="form-group row mt-4">
                                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                                    <label>Department</label>
                                </div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <input type="text" class="form-control bg-light text-dark" name="department">
                                </div>

                            </div>



                            <div class="form-group row mt-4">
                                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Website</label></div>
                                <div class="col-sm-12 col-md-6 col-lg-6">
                                    <input id="web" type="text" class="form-control bg-light text-dark"
                                        onclick="mobile_phone()" name="website">
                                </div>
                            </div>
                        </fieldset11>


                        <hr style="border: none; height: 2px; background-color: #ffcc00; margin: 20px 0;">

                        <div class="section-3">

                            <div class="toggle21 section-toggle"> <a href="">Other Details </a> </div>
                            <div class="toggle31 section-toggle"> <a href="">Address </a> </div>
                            <div class="toggle41 section-toggle"><a href="">Contact Persons </a></div>
                            <div class="toggle71 section-toggle"><a href="">Remarks</a></div>

                        </div>


                        <fieldset2 class="other details">

                            <div class="form-group row mt-2">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> GST
                                    Treatment*</label>

                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="gst" id="GSTTN" class="form-control bg-light text-dark"
                                        onclick="gstPan_functions()">
                                        <option value="Select a Gst Treatment" selected>Select a Gst Treatment</option>
                                        <option
                                            value="Registered Business-Regular Business that is registered under GST">
                                            Registered Business-Regular Business that is registered under GST</option>
                                        <option
                                            value="Registered Business-Composition Business that is registered under the Composition scheme in GST">
                                            Registered Business-Composition Business that is registered under the
                                            Composition schemen in GST
                                        </option>
                                        <option value="Unregistered Business-not Registered under GST">Unregistered
                                            Business-not Registered under GST</option>
                                        <option
                                            value="Overseas- Persons with who you do import or exports of supplies outside india">
                                            Overseas- Persons with who you do import or exports of supplies outside
                                            india</option>
                                        <option value="Special Economic Zone">Special Economic Zone</option>
                                    </select><br>
                                </div>


                            </div>

                            <fieldset3 id="gstn" style="display: none;">
                                <div class="row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                        GSTIN/UIN*</label>

                                    <div class=" col-sm-12 col-md-3 col-lg-3">
                                        <input type="text" class="form-control bg-light text-dark" name="gst_number"
                                            id="gst_Input" placeholder="11ABCDE1234F5Z6">
                                        <span id="gst_Message"></span>

                                    </div>


                                </div>

                            </fieldset3>

                            <fieldset4 id="pans" style="display: none;">
                                <div class=" row mt-4">
                                    <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> PAN</label>

                                    <div class=" col-sm-12 col-md-3 col-lg-3">
                                        <input type="text" class="form-control bg-light text-dark" id="pan_Input"
                                            name="pan_number" placeholder="ABCDE1234D">
                                        <span id="pan_Message"></span>


                                    </div>


                                </div>

                            </fieldset4>


                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Source Of
                                    Supply*</label>

                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="source_supply" id="PLACE" class="form-control bg-light text-dark">
                                        <option value="value" selected></option>
                                        <option value="[AN]-Andaman And Nicobar Islands">[AN]-Andaman And Nicobar
                                            Islands</option>
                                        <option value="[AD]-Andhra Pradesh">[AD]-Andhra Pradesh</option>
                                        <option value="[AR]-Arunachal Pradesh">[AR]-Arunachal Pradesh </option>
                                        <option value="volvo">[AS]-Assam</option>
                                        <option value="[BR]-Bihar">[BR]-Bihar</option>
                                        <option value="volvo">[CH]- Chandhigarh</option>
                                        <option value="[CG]-Chattisgarh">[CG]-Chattisgarh</option>
                                        <option value="[DD]-Daman Diu">[DD]-Daman Diu</option>
                                        <option value="volvo">[DL]- Delhi</option>
                                        <option value="[GA]-Goa">[GA]-Goa</option>
                                        <option value="[GJ]-Gujarat">[GJ]-Gujarat</option>
                                        <option value="[HR]-Haryana">[HR]-Haryana</option>
                                        <option value="[HP]-Himachal Pradesh">[HP]-Himachal Pradesh</option>
                                        <option value="[JK]-Jammu And Kashmir">[JK]-Jammu And Kashmir</option>
                                        <option value="[JH]-Jharkand">[JH]-Jharkand</option>
                                        <option value="[KA]-Karnataka">[KA]-Karnataka</option>
                                        <option value="[KL]-Kerala">[KL]-Kerala</option>
                                        <option value="[LA]-Ladakh">[LA]-Ladakh</option>
                                        <option value="[LD]-Lakshadweep">[LD]-Lakshadweep</option>
                                        <option value="[MP]-Madhyapradesh">[MP]-Madhyapradesh</option>
                                        <option value="[MH]-Maharashtra">[MH]-Maharashtra</option>
                                        <option value="[MN]-Manipur">[MN]-Manipur</option>
                                        <option value="[ML]-Meghalaya">[ML]-Meghalaya</option>
                                        <option value="[MZ]-Mizoram">[MZ]-Mizoram</option>
                                        <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                        <option value="[NL]-Nagaland">[NL]-Nagaland</option>
                                        <option value="[OD]-Odisha">[OD]-Odisha</option>
                                        <option value="[PY]-Puducherry">[PY]-Puducherry</option>
                                        <option value="[PB]-Punjab">[PB]-Punjab.</option>
                                        <option value="[RL]-Rajasthan">[RL]-Rajasthan</option>
                                        <option value="[SK]-Sikkim">[SK]-Sikkim</option>
                                        <option value="[TN]-Tamilnadu">[TN]-Tamilnadu</option>
                                        <option value="[TS]-Telenghana">[TS]-Telenghana</option>
                                        <option value="[TR]-Tripura">[TR]-Tripura</option>
                                        <option value="[UP]-Uttar Pradesh">[UP]-Uttar Pradesh</option>
                                        <option value="[UK]-Utharakhand">[UK]-Utharakhand</option>
                                        <option value="[WB]-West Bengal">[WB]-West Bengal</option>
                                        <option value="[OT]-Other Territory">[OT]-Other Territory</option>
                                    </select>
                                </div>


                            </div>



                            <!-- <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:rgb(214, 75, 75) ;">Tax Preference*</label>
                                
                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <input type="checkbox" id="Taxable" name="tax1" value="Taxable">&nbsp;
                                    <label for="vehicle1" class="pt-1">Taxable</label>
                                    &nbsp;&nbsp;&nbsp;
                                    <input type="checkbox" id="Tax_Exempt" name="tax1" value="Tax Exempt">&nbsp;
                                    <label for="vehicle2" class="pt-1">Tax Exempt</label>
                              
                                </div>
                            </div> -->




                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"
                                    style="color:rgb(214, 75, 75) ;">Tax Preference*</label>

                                <div class="col-sm-12 col-md-3 col-lg-4 d-flex align-items-center">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="tax1" id="Taxable"
                                            value="Taxable">
                                        <label class="form-check-label text-white" for="vehicle1">Taxable</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="tax1" id="Tax_Exempt"
                                            value="Tax Exempt">
                                        <label class="form-check-label text-white" for="vehicle2">Tax Exempt</label>
                                    </div>
                                </div>
                            </div>


                            <!-- </div> -->

                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Currency*</label>

                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="currency" id="PLACE" class="form-control bg-light text-dark">
                                        <option value="Indian Rupee" selected>Indian Rupee</option>
                                        <option value="Indian Rupee">Indian Rupee</option>

                                    </select>
                                </div>


                            </div>

                            <div class="form-group row mt-2">
                                <div class="col-sm-12 col-md-3 col-lg-3 ">
                                    <label class="col-form-label text-white mb-3"> Opening Balance Type</label>
                                </div>
                                <div class="col-sm-12 col-md-3 col-lg-4 d-flex align-items-center">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="op_type" id="debit"
                                            value="debit">
                                        <label class="form-check-label text-white" for="debit">Debit</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="radio" name="op_type" id="credit"
                                            value="credit">
                                        <label class="form-check-label text-white" for="credit">Credit</label>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Opening Balance
                                    Amount</label>
                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <input type="number" class="form-control bg-light text-dark" name="opening_bal"
                                        id="opa" value="0.00">
                                </div>
                            </div>

                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">Credit
                                    Limit</label>
                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <input type="number" class="form-control bg-light text-dark" name="credit_lm"
                                        id="cl" value="0.00">
                                </div>
                            </div>

                            <!-- Alert -->
                            <div id="custom-alert" class="alert">
                                <span class="close-btn">&times;</span>
                                <div class="alert-content">
                                    Credit limit should not exceed opening balance amount.
                                </div>
                            </div>
                            <style>
                                .alert {
                                    display: none;
                                    position: fixed;
                                    top: 30%;
                                    left: 50%;
                                    transform: translate(-50%, -50%);
                                    background-color: #f44336;
                                    color: white;
                                    padding: 15px;
                                    border-radius: 5px;
                                }

                                .close-btn {
                                    float: right;
                                    cursor: pointer;
                                }

                                .alert-content {
                                    margin-bottom: 10px;
                                }
                            </style>





                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Payment
                                    Terms</label>

                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="payment_terms" id="paytearm-selects"
                                        class="form-control bg-light text-dark">


                                        {% for pay_terms in payment %}
                                        <option value="{{pay_terms.id}}">{{pay_terms.term_name}}</option>
                                        {% endfor %}

                                    </select>

                                </div>

                                <div class="col-md-4 ">
                                    <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#npayment"
                                        data-toggle="modal"
                                        style="color: white; background-color: rgb(210, 132, 30);">+</a>
                                </div>





                            </div>





                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">Price List </label>

                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="plst" id="PLACE" id="PLACE" class="form-control bg-light text-dark">

                                        {% for price_list in price_lists %}

                                        <option value="{{price_list.id}}">{{price_list.name}}</option>

                                        {% endfor %}




                                    </select>

                                </div>


                            </div>










                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">
                                    Portal Language</label>
                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <select name="plang" id="PLACE" style="width: 100%;"
                                        class="form-control bg-light text-dark">
                                        <option selected disabled value="">Choose..</option>
                                        <option value="ENGLISH">ENGLISH</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label" style="color:white ;">Facebook
                                </label>
                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <input type="text" id="cn" name="fbk" class="form-control bg-light text-dark">

                                </div>
                            </div>
                            <div class="form-group row mt-4">
                                <label class="col-sm-12 col-md-3 col-lg-3 col-form-label"
                                    style="color:white ;">Twitter</label>
                                <div class=" col-sm-12 col-md-3 col-lg-3">
                                    <input type="text" id="cn" name="twtr" class="form-control bg-light text-dark">

                                </div>
                            </div>





                        </fieldset2>


                        <!------------------ Address Section Start------------- -->

                        <fieldset5 id="address" style="display: none;">
                            <div>
                                <div class="row">
                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <label for="">BILLING ADDRESS</label>
                                            </div>
                                            <div class="col"></div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Attention</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark"
                                                    name="battention" id="battens">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Country</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <select name="bcountry" id="btry"
                                                    class="form-control bg-light text-dark">
                                                    <option value="India" selected>India</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Address</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <textarea class="form-control bg-light "
                                                    style="border: none;color: rgb(7, 7, 7);" cols="26" rows="4"
                                                    name="baddress" id="badd1s"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                City</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark" name="bcity"
                                                    id="bctys">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                State</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark" name="bstate"
                                                    id="bstes">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Zip
                                                Code </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="number" class="form-control bg-light text-dark" name="bzip"
                                                    id="bzps">
                                            </div>
                                        </div>

                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Phone
                                            </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input id="bphone_nums" type="tel" pattern="[0-9]{10}"
                                                    class="form-control bg-light text-dark" name="bphone">
                                                <label for="" id="bphone_labels"></label>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Fax
                                            </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="tel" class="form-control bg-light text-dark"
                                                    pattern="[0-9]{7}" onmouseout="fax_numbers()"
                                                    onclick="bphone_numbers()" name="bfax" id="bfxs">

                                                <label for="" id="fax_labels"></label>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-sm-12 col-md-6 col-lg-6">
                                        <div class="row">
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <label for="">SHIPPING ADDRESS</label>
                                            </div>
                                            <div class="col-sm-12 col-md-6 col-lg-6">
                                                <input type="checkbox" id="myCheckTs"
                                                    onclick="myCopyAddressFunctions()">&nbsp;
                                                <label for="myCheck">Same as Billing Address:</label>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Attention</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark "
                                                    style="color: white;" name="sattention" id="sattens">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Country</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <select name="s_country" id="sctrys"
                                                    class="form-control bg-light text-dark">
                                                    <option value="India" selected>India</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                Address</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <textarea class="form-control bg-light"
                                                    style="border: none;color: rgb(10, 10, 10);" id="sadd1s" cols="26"
                                                    rows="4" name="saddress"></textarea>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                City</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark" name="scity"
                                                    id="sctys">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white">
                                                State</label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="text" class="form-control bg-light text-dark" name="sstate"
                                                    id="sstes">
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Zip
                                                Code </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="number" class="form-control bg-light text-dark" name="szip"
                                                    id="szps">
                                            </div>
                                        </div>


                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Phone
                                            </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="tel" class="form-control bg-light text-dark"
                                                    pattern="[0-9]{10}" style="color: white;" name="sphone"
                                                    id="sphone_nums">
                                                <label for="" id="sphone_labels"></label>
                                            </div>
                                        </div>
                                        <div class="form-group row mt-4">
                                            <label class="col-sm-12 col-md-3 col-lg-3 col-form-label text-white"> Fax
                                            </label>
                                            <div class=" col-sm-12 col-md-6 col-lg-6">
                                                <input type="tel" class="form-control bg-light text-dark"
                                                    pattern="[0-9]{7}" style="color: white;" name="sfax"
                                                    onclick="sphone_numbers()" onmouseout="sfax_numbers()" id="sfxs">
                                                <label for="" id="sfax_labels"></label>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </fieldset5>

                        <!---------------------Address  Section End -------------->


                        <!------------------ Contact Person Section Start------------- -->

                        <fieldset6 id="contact_person" style="display: none;">
                            <div class="row">
                                <div class="col-sm-12 ">

                                    <div class="table-responsive">

                                        <table id="tbls" class="table text-white"
                                            style="background-color: rgba(250, 227, 198, 0.5);">
                                            <thead>
                                                <tr>

                                                    <th>Salutation</th>
                                                    <th>First Name</th>
                                                    <th>Last Name</th>
                                                    <th>Email Address</th>
                                                    <th>Work Phone <br><span id="twph_labels"></span></th>
                                                    <th>Mobile <br><span id="tlabels"></span> </th>
                                                    <th>Skype Name/No</th>
                                                    <th>Designation</th>
                                                    <th>Department</th>
                                                    <th>Action</th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><select name="salutation[]"
                                                            class="form-control bg-transparent border-1 text-white"
                                                            id="PLACE">
                                                            <option class="text-dark">Select</option>
                                                            <option class="text-dark" value="Mr">Mr.</option>
                                                            <option class="text-dark" value="Mrs">Mrs.</option>
                                                            <option class="text-dark" value="Ms">Ms.</option>
                                                            <option class="text-dark" value="Miss">Miss.</option>
                                                            <option class="text-dark" value="Dr">Dr.</option>
                                                        </select></td>
                                                    <td><input type="text"
                                                            class=" form-control border-1 bg-transparent text-white"
                                                            name="first_name[]"></td>
                                                    <td><input type="text"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            name="last_name[]" /></td>
                                                    <td>
                                                        <input type="text"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            name="email[]" />


                                                    </td>

                                                    <td>
                                                        <input type="tel" pattern="[0-9]{7}"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            id="twphone" name="wphone[]" />

                                                    </td>
                                                    <td>
                                                        <input type="tel" pattern="[0-9]{10}"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            id="tmobile" onclick="samples1()" name="mobile[]" />

                                                    </td>
                                                    <td><input type="number"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            onclick="samples()" name="skype[]" /></td>
                                                    <td><input type="text"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            name="designation[]" /></td>
                                                    <td><input type="text"
                                                            class="form-control border-1 bg-transparent text-white"
                                                            name="department[]" /></td>
                                                    <td><button type="button" class="btn btn-danger"
                                                            onclick="deleteContact(this)">Delete</button></td>
                                                </tr>
                                            </tbody>
                                        </table>

                                    </div>

                                    <div class="button add_anothers mt-3 ">
                                        <i class="fa fa-user-plus" aria-hidden="true"></i>
                                        <span class="text-small" style="margin-left: 0.30rem;">
                                            Add Contact Person
                                        </span>
                                    </div>


                                </div>

                            </div>

                        </fieldset6>

                        <!---------------------Contact Person Section End -------------->


                        <!------------------ Remark Section Start------------- -->

                        <fieldset7 class="remarks" style="display: none;">
                            <div class="row">
                                <div class="col-sm-12 col-md-8 col-lg-8">
                                    <div class="form-group row mt-4">
                                        <div class=" col-sm-12 col-md-6 col-lg-6">
                                            <textarea class="bg-light w-100" style="border: none;color: rgb(5, 5, 5);"
                                                rows="5" name="remark"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-12 col-md-2 col-lg-2"></div>
                            </div>

                        </fieldset7>

                        <!---------------------Remark Section End -------------->

                        <div class="row mt-5">
                            <div class="col-sm-12 col-md-2 col-lg-2 mt-3">
                                <button type="submit" class="btn btn-outline-warning form-control bg-warning text-dark"
                                    style="font-weight: bold;">Save</button>

                            </div>

                            <div class=" col-sm-12 col-md-2 col-lg-2 mt-3">
                                <button type="reset" class="form-control  bg-warning text-dark"
                                    style="font-weight: bold;">Cancel</button>

                            </div>


                        </div>



                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- -------------------------Customer Payment terms-------------------------- -->

<div class="modal fade" id="npayment">
    <div class="modal-dialog modal-md">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
            <div class="modal-header " style="background: rgb(32, 35, 37);">
                <h3 class="m-3 text-uppercase" style="color: white;">Add Payment Term</h3>
                <button type="button" class="close btn btn-danger" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="background: rgb(32, 35, 37);">
                <div class="card p-3 m-3" style="background-color: #141414a2;">
                    <form action="" method="post" class="needs-validation" novalidate autocomplete="off"
                        id="modalPayment_terms">



                        <div class="row mt-2">

                            <div class="col-lg-12 col-md-12 col-sm-12 mt-2">
                                <label for="termname" style="color: white">Term Name *</label>

                                <input type="text " class="form-control text-dark bg-light mt-2" id="tnames"
                                    name="term_name" autocapitalize="characters" required>
                                <span id="message-ids" class="mt-1 text-danger" style="font-size: 10px;"></span>
                                <span id="success-message-ids" class=" mt-1 text-success"
                                    style="font-size: 10px;"></span>
                            </div>

                            <div class="col-lg-12 col-md-12 col-sm-12 mt-2">
                                <label for="termdays" style="color: white">Number of Days *</label>

                                <input type="number" class="form-control text-dark bg-light mt-2" id="tdayss"
                                    name="term_days" autocapitalize="characters" required>
                            </div>
                            <div class="col-md-2 mt-2"></div>

                        </div>

                        <div class="row mt-5">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <div class="d-flex">
                                    <button
                                        class="btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning "
                                        type="submit" data-dismiss="modal" id="CtermSave">Save
                                    </button>


                                    <button type="button"
                                        class="close btn save_btn rounded-pill text-grey w-50 my-1 mx-1 btn-outline-warning"
                                        data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">Cancel</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-------------------Customer Payments  Section End -------------->

<!-- ----------------------------Item modal------------------------------ -->
<div class="modal fade" id="create_item" style="overflow: auto;">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content modal-xl  p-5"
            style="background-color: #000000;height: 700px; overflow-y: scroll;overflow: auto;">
            <div class="modal-header">
                <h3 class="mb-3  text-white  " style="font-size: 2rem;">New item</h3>
                <button type="button" class="close text-light" data-dismiss="modal" aria-label=""
                    style="font-size: 20px;;background-color: #000000;border:none;">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="{% url 'create_item'%}" method="POST" id="add" style="padding-left: 20px;">
                {% csrf_token%}
                <br>  
                <h3 class="mb-3 text-white mt-4" style="font-size: 2rem;"></h3>
                <br>
                <fieldset class="form-group" >
                    <div class="row">
                      <hr>
                     
                        <div class="col-12 col-md-10">
                          <label class="col-12 col-md-2 col-form-label pt-3" style="color: aliceblue;">Type  &nbsp;&nbsp;<i
                            class="fa fa-question-circle"></i></label>
                            <div class="form-check form-check-inline">
                                <input required class="form-check-input" type="radio" name="type" id="gridRadios1" value="Goods">
                                <label class="form-check-label text-white" for="gridRadios1">Goods</label>
                            </div> &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                            <div class="form-check form-check-inline ml-md-3">
                                <input required class="form-check-input" type="radio" name="type" id="gridRadios2" value="Services">
                                <label class="form-check-label text-white" for="gridRadios2">Services</label>
                            </div>
                        </div>
                    </div>
                </fieldset>
                <br>
                <div class="form-group row">
                    <label  class="col-sm-2 col-form-label " style="color: aliceblue;">Name *</label>
                    <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                      <input required type="text" class="form-control" name="name" id="nameInput" style="color: aliceblue;" placeholder="Enter Item Name">  
                    </div>
                  </div>
                  <br>
                  <div class="form-group row">
                    <label class="col-sm-2 col-form-label" style="color: aliceblue;">Unit <i class="fa fa-question-circle"></i></label>
                    <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                        <div class="d-flex align-items-center">
                            <select name="unit" class="form-control" id="selunit"  style="background-color: black; color: white;border-radius: 5px;"  >
                              {% for i in units %}
                                <option value={{i.id}}>{{i.unit_name}}</option>
                              {% endfor %}
                            </select>
                            <script>
                              $(document).ready(function() {
                                // Initialize select2
                                $('#selunit').select2();
                              });
                              </script>                        
                               <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js" defer ></script>
            <a class="btn btn-outline-warning py-2" style="cursor: pointer;" data-toggle="modal" data-target="#unitmodal" style="height: 38px; margin-right: 3px;">+</a>
                        </div>
                    </div>
                </div>
                <br>
                <div class="form-group row">
                    <label class="col-sm-2 col-form-label" style="color: aliceblue;">HSN Code</label>
                    <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                        <input required type="text" class="form-control" name="hsn" required id="myInputField" style="color: aliceblue;" placeholder="Enter six digit HSN code" oninput="validateInput()">
                        <div id="validationResult"></div>
                    </div>
                </div>
                <br>
                <fieldset class="form-group" >
                    <div class="row">
                  
                        <div class="col-12 col-md-10">
                          <label class="col-12 col-md-2 col-form-label pt-3" style="color: aliceblue;">Tax Preference: &nbsp;&nbsp;</label>
                            <div class="form-check form-check-inline">
                                <input required class="form-check-input" type="radio" name="radio" id="gridRadios1" onclick="showAllSelect()" value="taxable">
                                <label class="form-check-label text-white" for="gridRadios1">Taxable</label>
                            </div> &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
                            <div class="form-check form-check-inline ml-md-3">
                                <input required class="form-check-input" type="radio" name="radio" id="gridRadios2"  onclick="hideAllSelect()" value="None-Taxable">
                                <label class="form-check-label text-white" for="gridRadios2"> None-Taxable</label>
                            </div>
                        </div>
                    </div>
                </fieldset>
              
      <br>
                  <div class="row">
                    <div class="col-md-3">
                  
                      <div id="select1_div" style="display: none;">
                        <label for="select1">Intra-State TAX</label><br> <br>
                        <select name="intra" class="form-control" id="select1" style="background-color: black; color: white;">
                            <option value="0">GST0[0%]</option>
                            <option value="3">GST3[3%]</option>
                            <option value="5">GST5[5%]</option>
                            <option value="12">GST12[12%]</option>
                            <option value="18">GST18[18%]</option>
                            <option value="28">GST28[28%]</option>
                        </select>
                        
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div id="select2_div" style="display: none;">
                        <label for="select2">Inter-State TAX</label> <br><br>
                        <select name="inter" class="form-control " id="select2" style="background-color: black; color: white;">
                          <option value="0">IGST0[0%]</option>
                          <option value="5">IGST3[3%]</option>
                          <option value="5">IGST5[5%]</option>
                          <option value="12">IGST12[12%]</option>
                          <option value="18">IGST18[18%]]</option>
                          <option value="28">IGST28[28%]</option>
                        </select>
                      </div>
                    </div>
                  </div>
                  <br>
                  <div class="row">
                    <div class="col-md-6">
                      <input  type="checkbox" name="selling" checked> <label >selling  information</label><br><br>
                      <div class="form-group row">
                        <br>
                        <label class="col-sm-2 col-form-label" style="color: aliceblue;">Selling price </label>
                        <div class="col-sm-12 col-md-7 col-9 ml-5">
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text text-white" style="background-color: black;">INR</div>
                            </div>
                            <input required type="text" name="sel_price" style="color: #ede4e4;" class="form-control">
                          </div>
                        </div>
                      </div>
                      <br>
                      <br>
                      <div class="form-group row">
                        <label  class="col-sm-2 col-form-label" style="color: aliceblue;">Account *</label>
                        <div class="col-sm-10 col-md-7 col-9 ml-5">
                          <select name="sel_acc" class="form-control " style="background-color: black; color: white;">
                            <option value=" ">--Select Account--</option>
                            <option value="General Income">General Income</option>
                            <option value="Interest Income">Interest Income</option>
                            <option value="Late Fee  Income">Late Fee  Income</option>  
                            <option value="Discount Income">Discount Income</option>
                            <option value="Other Charges">Other Charges</option>
                            <option value="Shipping Charge">Shipping Charge</option>
                        
                          </select>                              
                        </div>
                      </div>
                      <br>
                      <br>
                      <div class="form-group row">
                        <label  class="col-sm-2 col-form-label" style="color: aliceblue;">Description </label>
                        <div class="col-sm-10 col-md-7 col-9 ml-5">
                          <input  type="text" style="color: #ede4e4;" name="sel_desc" class="form-control " placeholder="Enter Discription">
                        </div>
                      </div>
                                            
                    </div>
                    <div class="col-md-6">
                      <input type="checkbox" name="purchase" checked> <label for="">Purchase information</label><br><br>
                      <div class="form-group row">
                        <br>
                        <label  class="col-sm-2 col-form-label" style="color: aliceblue;">Cost Price*</label>
                        <div class="col-sm-10 col-md-7 col-9">
                          <div class="input-group mb-2">
                            <div class="input-group-prepend">
                              <div class="input-group-text text-white" style="background-color: black;">INR</div>
                            </div>
                            <input required type="text" style="color: #ede4e4;" class="form-control " name="cost_price" >
                          </div>
                        </div>
                      </div>
                      <br>
                      <div class="form-group row in">
              
                        <label class="col-sm-2 col-form-label" style="color: aliceblue;">Account*</label>
                        <div class="col-sm-10 col-md-7 col-5">
                            <div class="d-flex align-items-center">
                                <select name="cost_acc" class="form-control " id="myaccount" style="color: #fefefe;background-color: #000;" required>
                                  <option value="">--Select Account--</option>
                                  <optgroup id="expensesel" label="Expense">
                             
                                  {% for i in accounts %}
      
                                  {% if i.account_type == 'Expense' %}
                                
                                    <option value="{{i.account_name}}">{{i.account_name}}</option>
                            
                                  {% endif %}
                                  {% endfor %}
                                </optgroup>
                                <optgroup id="costofgoods" label="Cost Of Goods Sold">
                                  {% for i in accounts %}
                                  {% if i.account_type == 'Cost Of Goods Sold' %}
                            
                                    <option value="{{i.account_name}}">{{i.account_name}}</option>
                                    
                                    {% endif %}
                                    {% endfor %}
                                  </optgroup>
                                  <optgroup id="otherexpensesel" label="Other Expense">
                                  {% for i in accounts %}
                                  {% if i.account_type == 'Other Expense' %}
                            
                                    <option value="{{i.account_name}}">{{i.account_name}}</option>
                                    
                                    {% endif %}
                                    {% endfor %}
                                  </optgroup>
                      
                                 
                              
                                </select>
                                <script>
                                  $(document).ready(function() {
                                    // Initialize select2
                                    $('#myaccount').select2();
                                  });
                                  </script>                        
                                   <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js" defer ></script>
                                <a class="btn btn-outline-warning py-2" style="cursor: pointer;" data-toggle="modal" data-target="#account" style="height: 38px; margin-right: 3px;">+</a>
         
                            </div>
                           
                        </div>
                    </div>
                    <br>
                    <div class="form-group row in">
                        <label class="col-sm-2 col-form-label" style="color: aliceblue;">Description</label>
                        <div class="col-sm-10 col-md-7 col-5">
                            <div class="d-flex align-items-center">
                                <input  type="text" style="color: #ede4e4;" name="pur_desc" class="form-control " placeholder="Enter Discription">
                            </div>
                        </div>
                    </div>
                    </div>
                    </div>
                    <br>     <br>
                    <div class="form-group row text-center">
                        <label class="col-sm-2 col-form-label" style="color: aliceblue;">Minimum Stock to maintain :</label>
                        <div class="col-sm-10 col-md-7 col-9 d-flex align-items-center" style="margin-left: -2.2rem;">
                          <input type="number" style="color: #ede4e4;" name="minimum_stock" class="form-control mx-auto" placeholder="Enter Minimum Stock">
                        </div>
                      </div>
                      <br>
                     
                    <br><br>     
                    <div class="row" >
                      <div class="col-md-10">
                        {% comment %} <label style="color: aliceblue;"><input type="checkbox" value="trackstate" name="trackstate" onclick="toggleForm()" style="display: none;">
                       Track Inventory for this item</label> {% endcomment %}
                        <!-- {% comment %} <input type="checkbox" name="trackState" id="trackStateCheckbox">{% endcomment %} -->
                        <label style="color: aliceblue;">
                       
                          <input type="checkbox" name="trackstate" class=" "  onclick="toggleFormFields()">
                          Track Inventory for this item
                        </label>   <br>   <br>
                        <div id="formFields" style="display: none;"> 
                          <div class="form-group row" >
                            <label class="col-sm-2 col-form-label" style="color: aliceblue;">Inventory Account *</label>
                            <div class="col-sm-10 col-md-7 col-9" style="margin-left: -1rem;">
                              <select class="form-select form-select-sm mt-3 " name="invacc" style="background-color: black; color: white;">
                                <option value="">Choose..</option>
                                <option value="inventory assets">Inventory Asset</option>
                              </select>
                            </div>
                          </div>
                          <br>
                          <div class="form-group row ">
                            <label class="col-sm-2 col-form-label" style="color: aliceblue;">Opening Stock</label>
                            <div class=" col-md-5">
                              <input  type="number" style="color: #ede4e4;" class="form-control "  name="openstock" value="0">
                            </div>
                            </div>
                            <br>
                            <div class="form-group row ">
                                <label class="col-sm-2 col-form-label" style="color: aliceblue;">Opening Stock Rate per Unit</label>
                                <div class=" col-md-5">
                                    <input type="number" style="color: #ede4e4;" class="form-control" name="rate"  value="0">
                                </div>
                                </div>
      
                          </div>
                        </div>
                      </div>
                      
                    <div class="form-inline " style="margin-bottom: 200px;padding-bottom: 20px;">
                        <button type="submit"  class="mr-3 btn" style="background-color: chocolate;color: aliceblue;" value="Save">Save</button>
                        <button type="button" class="mr-3 btn" onclick="resetForm()" value="Cancel" style="margin-left:10px;background-color: chocolate;color: aliceblue;">Cancel</button>
                      </div>   
                      
                      <div class="form-inline " style="margin-bottom: 200px;"></div>
                      <div class="form-inline " style="margin-bottom: 200px;"></div>
                      <div class="form-inline " style="margin-bottom: 200px;"></div>
            </form>

            {% comment %} <div id="total-bill-amount" class="mt-3" style="color: white;"></div> {% endcomment %}
            <div>
                <div id="noDataMessage" style="display: none; color: white;">No data found for selected dates.</div>	
                <br><br><br><br><br>
            </div>

            <div class="form-inline " style="margin-bottom: 200px;"></div>                <div class="form-inline " style="margin-bottom: 200px;"></div>

        </div>
    </div>
</div>


<!-- ----------------------------end item modal----------------------------- -->

<!-- -----------------------------------------unit modal----------------------------- -->

<div class="modal fade" id="unitmodal">
    <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
            <div class="modal-header" style="background: rgb(32, 35, 37);">
                <h5 class="m-3 text-uppercase" id="shareBillEmailLabel" style="color: #eeeaea;">Add Unit</h5>
                <button type="button" class="close" style="width: 30px;" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body" style="background: rgb(32, 35, 37);">
                <div class="card p-3 m-3" style="background-color: #000;">

                    <div id="error-message-container" style="color: chocolate;"></div>
                    <form action="" class="needs-validation" novalidate autocomplete="off" id="unitform">
                        {% csrf_token %}

                        <h1 class="text-dark"></h1>

                        <label class="text-dark" for="unit"><b>Unit Name</b></label>
                        <input type="text" class="form-control text-white" placeholder="Enter unit" id="unitName"
                            name="unit_name" required>
                        <p class="text-white">eg:KL,PCS,BOX,LTR</p>

                        <button type="submit" id="UnitSave2" class="btn submit text-white"
                            style="border-color: #ced4da;">Add</button>
                    </form>


                </div>
            </div>
        </div>
    </div>
</div>


<!-- HSN CODE VALIDATION SCRIPT -->

<script>
    function validateSixDigits(field) {
        // Define the regular expression pattern for exactly six digits
        var pattern = /^\d{6}$/;

        // Check if the field matches the pattern
        return pattern.test(field);
    }

    function validateInput() {
        var inputField = document.getElementById("myInputField");
        var inputValue = inputField.value;

        var validationResultDiv = document.getElementById("validationResult");

        if (validateSixDigits(inputValue)) {
            validationResultDiv.textContent = "Valid";
        } else {
            validationResultDiv.textContent = "Invalid: The field does not contain six digits.";
        }
    }
</script>
<!-- HSN CODE VALIDATION SCRIPT END -->


<!-- TAXABLE SCRIPT0 -->
<script>
    function showAllSelect() {
        var select1_div = document.getElementById("select1_div");
        var select2_div = document.getElementById("select2_div");
        select1_div.style.display = "block";
        select2_div.style.display = "block";
    }

    function hideAllSelect() {
        var select1_div = document.getElementById("select1_div");
        var select2_div = document.getElementById("select2_div");
        select1_div.style.display = "none";
        select2_div.style.display = "none";
    }
</script>

<!-- TAXABLE SCRIPT0  end-->

<!-- TRACK INVENTORY SCRIPT -->
<script>
    function toggleFormFields() {
        var formFields = document.getElementById("formFields");
        var checkbox = document.querySelector("input[name=trackstate]");

        if (checkbox.checked) {
            formFields.style.display = "block";
        } else {
            formFields.style.display = "none";
        }
    }
</script>

<!-- TRACK INVENTORY SCRIPT END -->


<!-- FORM RESET SCRIPT -->

<script>
    function resetForm() {
        document.getElementById("adds").reset();
    }
</script>

<!-- FORM RESET SCRIPT END -->

<!-- -------------------------alert of bill number ------------------ -->
<script type="text/javascript">
    $(document).on('change','#bill_code_number', function() {
        ord = '{{bill_no}}'
        ord_value = $('#bill_code_number').val();
        
        if(ord_value != ord){
            alert('The Next Number is '+ ord)
            document.getElementById('bill_code_number').value = ord;
        }else{
            document.getElementById('dangerdiv').style.display = 'none';
        }
        
        
    })
</script>

<!-- ----------------------end--------------------------------- -->

<!-- UNIT SCRIPT -->
<script>

    $(document).on("click", "#UnitSave2", function (event) {
        event.preventDefault(); // Prevent the default form submission

        $.ajax({
            type: 'POST',
            url: "{% url 'add_unit' %}",
            data: {
                units: $("#unitName").val(),
                csrfmiddlewaretoken: '{{ csrf_token }}'
            },
            success: function (response) {
                if (response.message === 'success') {
                    document.getElementById("unitform").reset();
                    reloadUnit();
                } else {
                    $("#error-message-container").text("Unit with the same name exists");
                }
            },
        });
    });



    function reloadUnit() {

        $.ajax({
            url: "{% url 'unit_dropdown' %}",
            type: "GET",
            dataType: "json",
            data: $(this).serialize(),
            csrfmiddlewaretoken: '{{ csrf_token }}',

            success: function (data) {
                var dropdown = $('#selunit');

                $.each(data, function (key, value) {

                    dropdown.append($('<option></option>').attr('value', key).text(value[1]).val(key));

                });

            },

        });
    }
</script>
<!-- UNIT SCRIPT END -->




<!-- -----------------------------------------------end unit modal--------------------------- -->

<!-- ACCOUNT SCRIPT-->
         <script>
          $(document).on("click","#newaccountsave",function(){
            event.preventDefault();
          $.ajax({
            
            type : 'POST',
            url:"{% url 'add_account_bill' %}",
        
            data:{
                
                account_type : $("#soValue1").val(),
                account_name : $("#account_name").val(),
                account_code : $("#account_code").val(),
                description : $("#description").val(),
              
         
         
                csrfmiddlewaretoken: '{{ csrf_token }}'
                
              },
              success: function(response) {
            if (response.message === 'success') {
              document.getElementById("newaccount").reset();
                  reloadaccount()
            } else {
              $("#error-message-container2").text("Account with the same name exists");
            }
          },
      
          });        
        });
        
        
        
        
        </script>
        
         
        <script>
        
        
        
        function reloadaccount() {
          debugger
        $.ajax({
          url: "{% url 'account_dropdown_bill' %}",
          type: "GET",
          dataType: "json", 
          data: $(this).serialize(),
          csrfmiddlewaretoken: '{{ csrf_token }}',
        
          success: function(data) {debugger
            var dropdown = $('#myaccount');
            dropdown.empty();
            dropdown.append($('<option></option>').text('Select account'));
            
            $.each(data, function(key, value) {
       
                dropdown.append($('<option></option>').attr('value', key).text(value[1]).val(key));
            });
      
          },
          error: function(xhr, status, error) {
          console.error(xhr.responseText);
      
          }
        });
        }
        </script>
         <!-- ACCOUNT SCRIPT END -->
      
         
                  

<!-- ------------------------------account modal------------------------ -->

<div class="modal fade" id="account">
    <div class="modal-dialog modal-xl">
      <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header" style="background: rgb(32, 35, 37);">
          <h5 class="m-3 text-uppercase" id="shareBillEmailLabel" style="color: #eeeaea;"><b>New Account</b></h5>
          <button type="button" class="close" style="width: 30px;" data-dismiss="modal" aria-label="Close"><span
              aria-hidden="true">&times;</span></button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
          <div class="card p-3 m-3" style="background-color: #000;">
          
           
              <form action="" method="post"  style="color: #000000;" id="newaccount">
                {% csrf_token %}
                {% for m in messages %}
                <p style="color: chocolate;">{{m}}</p>
                {% endfor %}
                  <div class="d-flex align-items-center">
                      <h5 style="font-size: 25px;color: aliceblue;">Create Account</h5>
                    
                  </div>
                  <div id="error-message-container2" style="color: chocolate;"></div>
                  <hr>
                  <div class="row ">
                      <div class="col">
                          <div class="row">
                              <div class="col-sm-4">
                                  <label for="">Account Type:</label>
                              </div>
                              <div class="col-sm-8">
                                  <div class="select-box1" onclick="message()">
                                      <div class="select-option1">
                                          <input type="text" placeholder="select" style="width: 100%;"  id="soValue1" name="account_type"readonly>
                                      </div>
                                      <div class="content1" id="myDropdown1">
                                          <div class="search1">
                                              <input type="text" placeholder="search" id="myInput1" onkeyup="filterFunction1()">
                                          </div>
                                          <ul class="options1" style="color: #000000;">
                                              <div class="opt" style="color: #000000;">
                                                  <span style="font-weight: bold;color: #000;">Assets</span>
                                                  <li style="color: #000000;">Other Assets</li>
                                                  <li>Other Current Assets</li>
                                                  <li>Cash</li>
                                                  <li>Bank</li>
                                                  <li>Fixed Asset</li>
                                                  <li>Stock</li>
                                                  <li>Payment Clearing</li>
                                              </div>
          
                                              <div class="opt">
                                                  <span style="font-weight: bold;color: #000;">Liability</span>
                                                  <li>Other Liability</li>
                                                  <li>Other Current Liability</li>
                                                  <li>Credit Card</li>
                                                  <li>Long Term Liability</li>
                                                  <li>Overseas Tax Payable</li>
                                              </div>
          
                                              <div class="opt">
                                                  <span style="font-weight: bold;color: #000;">Equity</span>
                                                  <li>Equity</li>
                                              </div>
          
                                              <div class="opt">
                                                  <span style="font-weight: bold;color: #000;">Income</span>
                                                  <li>Income</li>
                                                  <li>Other Income</li>
                                              </div>
          
                                              <div class="opt">
                                                  <span style="font-weight: bold;color: #000;">Expense</span>
                                                  <li>Expense</li>
                                                  <li>Cost Of Goods Sold</li>
                                                  <li>Other Expense</li>
                                              </div>
                                          </ul>
          
          
          
                                      </div>
                                  </div>
          
                              </div>
          
                              <script>
                                  const selectBox1 = document.querySelector('.select-box1');
                                  const selectOption1 = document.querySelector('.select-option1');
                                  const optionsList1 = document.querySelectorAll('.options1 li');
                                  const soValue1 = document.querySelector('#soValue1');
          
                                  selectOption1.addEventListener('click', function () {
                                      selectBox1.classList.toggle('active')
                                  })
          
                                  optionsList1.forEach(function (optionsListSingle) {
                                      optionsListSingle.addEventListener('click', function () {
                                          text = this.textContent;
                                          soValue1.value = text;
                                          selectBox1.classList.remove('active')
          
                                      })
                                  })
                              </script>
                          </div>
                          <div id="name" style="display: block;">
                              <div class="row mt-3">
                                  <div class="col-sm-4">
                                      <label for="">Account Name:</label>
                                  </div>
                                  <div class="col-sm-8">
                                      <input type="text" class="form-control text-dark bg-light" name="account_name"
                                          id="account_name" style="width: 100%;" required>
                                  </div>
                              </div>
                          </div>
          
                          <div id="credit" style="display: none;">
                              <div class="row mt-3">
                                  <div class="col-sm-4">
                                      <label for="">Credit Card Name:</label>
                                  </div>
                                  <div class="col-sm-8">
                                      <input type="text" class="form-control text-dark bg-light" style="width: 70%;" name="credit_number"
                                          id="credit_number">
                                  </div>
                              </div>
                          </div>
          
         
          
          
          
                          <div class="row mt-3">
                              <div class="col-sm-4">
                                  <label for="">Account Code:</label>
                              </div>
                              <div class="col-sm-8">
                                  <input type="text" class="form-control text-dark bg-light" name="account_code"
                                      id="account_code" style="width: 100%;">
                              </div>
                          </div>
                          <div style="display: none;" id="acc_bo_div">
                              <div class="row mt-3">
                                  <div class="col-sm-4">
                                      <label for="">Account Number:</label>
                                  </div>
                                  <div class="col-sm-8">
                                      <input type="text" class="form-control text-dark bg-light" name="account_number"
                                          id="account_number" style="width: 100%;">
                                  </div>
                              </div>
                          </div>
          
                          <div style="display: none;" id="cr_div">
                              <div class="row mt-3">
                                  <div class="col-sm-4">
                                      <label for="">Currency:</label>
                                  </div>
                                  <div class="col-sm-8">
                                      <input type="text" class="form-control text-dark bg-light" name="currency" id="currency" style="width: 100%;">
                                  </div>
                              </div>
                          </div>
                          <div class="row mt-3">
                              <div class="col-sm-4">
                                  <label for="">Description:</label>
                              </div>
                              <div class="col-sm-8">
                                  <textarea name="description" class="form-control text-dark bg-light" id="description"
                                      placeholder="Max. 500 characters" style="width: 100%;"></textarea>
                              </div>
                          </div>
                          <!-- <div class="row mt-3">
                              <div class="col-sm-4">
                                  <label for=""></label>
                              </div>
                              <div class="col-sm-8">
                                  <input type="checkbox" class=" text-dark bg-light" name="watchlist" id="watchlist" style="width: 70%;">
          
                                  <label for="">Add to the watchlist on my dashboardt</label>
                              </div>
                          </div> -->
          
                      </div>
          
                      <div class="col-sm">
                        <div class="alert alert-warning alert-dismissible fade show" style="width: 50%;" >
                            <span id="message_hd" style="color: #000000;">Assets</span> <br>
                            <span id="message" style="color: #000000;">Track special assets like goodwill and other intangible assets</span>
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                    </div>
                  </div><br><br><br><br><br>
                  <div class="row">
                      <div class="col-sm-12">
                          <input class="btn btn-warning" type="submit" value="Save" id="newaccountsave" style="width: 100px;height: 40px;">
                          <input class="btn btn-light ml-3" type="reset" value="Cancel" style="width: 100px;height: 40px;">
                      </div>
                    </div>
        </form>
        
  
      </div>
    </div>
  </div>
  </div></div>
  </div>
  </div>
  
        <!-- MODAL account END -->   
  
        <!-- MODAL account END -->
<!-- -----------------------------------end accound modal---------------------- -->



<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/js/bootstrap-select.min.js"></script>
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.14.0-beta2/js/i18n/defaults-en_US.min.js"></script>

<!-- Initialize Bootstrap SelectPicker -->
<script>
    $(document).ready(function () {
        $('.selectpicker').selectpicker();
    });
</script>
<script>
    $(document).ready(function () {

        // Get the CSRF token from the cookie
        function getCookies(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        var csrftoken = getCookies('csrftoken');

        // Pan Number Check

        $('#pan_Input').on('input', function () {
            var panNumber = $(this).val();
            var regex = /[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
            if (regex.test(panNumber)) {
                $('#pan_Message').text('PAN number is valid.').css('color', 'green');
                // PAN number is valid, call AJAX to check if it exists
                $.ajax({
                    url: "{% url 'customer_check_pan' %}",
                    headers: { 'X-CSRFToken': csrftoken },
                    type: 'POST',
                    data: { panNumber: panNumber },
                    success: function (response) {
                        if (response.status == 'exists') {
                            $('#pan_Message').text('PAN number already exists.').css({
                                'color': 'red',
                                'font-size': '12px'
                            });

                        }
                    }
                });
            } else {
                $('#pan_Message').text('Please enter a valid PAN number.').css({
                    'color': 'red',
                    'font-size': '12px'
                });
            }
        });

        // Pna Number Check End 


        // GST Number Check 

        $('#gst_Input').on('input', function () {
            var gstNumber = $(this).val();
            var regex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z][0-9A-Z]{1}[0-9A-Z]$/;
            if (regex.test(gstNumber)) {
                $('#gst_Message').text('GST number is valid.').css('color', 'green');
                // GST number is valid, call AJAX to check if it exists
                $.ajax({
                    url: "{% url 'customer_check_gst' %}",
                    headers: { 'X-CSRFToken': csrftoken },
                    type: 'POST',
                    data: { gstNumber: gstNumber },
                    success: function (response) {
                        if (response.status == 'exists') {
                            $('#gst_Message').text('GST number already exists.').css({
                                'color': 'red',
                                'font-size': '12px'
                            });

                        }
                    }
                });
            }
            else {
                $('#gst_Message').text('Please enter a valid GST number.').css({
                    'color': 'red',
                    'font-size': '12px'
                });
            }
        });

        // GST Number Check End 

    });
</script>
<script>
    function gstPan_functions() {
        var x = document.getElementById('GSTTN').value
        if (x == "Unregistered Business-not Registered under GST") {
            document.getElementById("pans").style.display = "block";
            document.getElementById("gstn").style.display = "none";


        }
        else if ((x == "Registered Business-Regular Business that is registered under GST") || (x == "Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x == "Overseas- Persons with who you do import or exports of supplies outside india") || (x == "Special Economic Zone")) {
            document.getElementById("gstn").style.display = "block";
            document.getElementById("pans").style.display = "block";


        }

    }

    $(document).ready(function () {
        $(".toggle11").click(function (e) {
            e.preventDefault();
            $("fieldset11").toggle();
        })
    })
    $(document).ready(function () {
        $(".toggle21").click(function (e) {
            e.preventDefault();

            $("fieldset2").toggle();
            $("fieldset5").hide();
            $("fieldset6").hide();
            $("fieldset7").hide();



        })
    })

    $(document).ready(function () {
        $(".toggle31").click(function (e) {
            e.preventDefault();
            $("fieldset5").toggle();
            $("fieldset2").hide();
            $("fieldset6").hide();
            $("fieldset7").hide();

        })
    })
    $(document).ready(function () {
        $(".toggle41").click(function (e) {
            e.preventDefault();
            $("fieldset6").toggle();
            $("fieldset2").hide();
            $("fieldset5").hide();
            $("fieldset7").hide();

        })
    })
    $(document).ready(function () {
        $(".toggle71").click(function (e) {
            e.preventDefault();
            $("fieldset7").toggle();
            $("fieldset2").hide();
            $("fieldset6").hide();
            $("fieldset5").hide();



        })
    })

    $('document').ready(function () {
        $('.add_anothers').click(function () {
            $("#tbls").append(`<tr>
            <td>
                <select name="salutation[]" id="PLACE" class="form-control bg-transparent border-1 text-white">
                    <option value="Mr" class="text-dark" selected>Mr.</option>
                    <option class="text-dark" value=""Mrs">Mrs.</option>
                    <option class="text-dark" value="Ms">Ms.</option>
                    <option class="text-dark" value="Miss">Miss.</option>
                    <option class="text-dark" value="Dr">Dr.</option>
                </select>  
            </td>
            <td>
                <input type="text" name="first_name[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="text" name="last_name[]" class="form-control border-1 bg-transparent text-white"   value="" />
            </td>
            <td>
                <input type="email" name="email[]" class="form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td>
                <input type="tel" pattern="[0-9]{7}" id="twphone" name="wphone[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="tel" pattern="[0-9]{10}" id="tmobile" onclick="samples1()" name="mobile[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="number" onclick="samples()" name="skype[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="text" name="designation[]" class="form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td>
                <input type="text" name="department[]" class="form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td><button type="button" class="btn btn-danger" onclick="deleteContact(this)">Delete</button></td>
        </tr>`);
        });
    })

    function fieldset5_function() {
        document.getElementById("address").style.display = "block";
    }



    function myCopyAddressFunction() {
        var checkBox = document.getElementById("myCheckT");
        var textatn = document.getElementById("batten");
        var txtcry = document.getElementById("bctry");
        var txtadrs11 = document.getElementById("badd1");
        var txtcty = document.getElementById("bcty");
        var txtstat = document.getElementById("bste");
        var txtzip = document.getElementById("bzp");
        var txtphone = document.getElementById("bphone_num");
        var txtfx = document.getElementById("bfx");

        var textatn1 = document.getElementById("satten");
        var txtcry1 = document.getElementById("sctry");
        var txtadrs21 = document.getElementById("sadd1");
        var txtcty1 = document.getElementById("scty");
        var txtstat1 = document.getElementById("sste");
        var txtzip1 = document.getElementById("szp");
        var txtphone1 = document.getElementById("sphone_num");
        var txtfx1 = document.getElementById("sfx");
        if (checkBox.checked == true) {
            textatn1.value = textatn.value;
            txtadrs21.value = txtadrs11.value;
            txtcty1.value = txtcty.value;
            txtstat1.value = txtstat.value;
            txtzip1.value = txtzip.value;
            txtphone1.value = txtphone.value;
            txtfx1.value = txtfx.value;






        } else {
            txtadrs21.value = "";
            txtcty1.value = "";
            txtstat1.value = "";
            txtzip1.value = "";
            txtphone1.value = "";
            txtfx1.value = "";
            txtcry1.value = "";
            textatn1.value = "";


        }
    }


</script>

<script>
    $(document).ready(function () {
        // Attach event listener to input fields
        $('#opa, #cl').on('input', function () {
            // Get values of the input fields
            var openingBal = parseFloat($('#opa').val());
            var creditLimit = parseFloat($('#cl').val());

            // Check if credit limit is greater than opening balance amount
            if (creditLimit > openingBal) {
                // Show custom alert
                $('#custom-alert').fadeIn();

                // Clear the value of #cl
                $('#cl').val('');
            }
        });

        // Close custom alert when close button is clicked
        $('.close-btn').on('click', function () {
            $('#custom-alert').fadeOut();
        });
    });
</script>
<script>
    function deleteContact(button) {
        var row = button.parentNode.parentNode;
        row.parentNode.removeChild(row);
    }

    document.querySelector('.add_anothers').addEventListener('click', function () {
        var table = document.getElementById('tbls').getElementsByTagName('tbody')[1];
        var newRow = table.insertRow(table.rows.length);

        for (var i = 1; i < 9; i++) {
            var cell = newRow.insertCell(i);
            cell.innerHTML = '<input type="text" class="form-control border-1 bg-transparent text-white" name="dynamic[]">';
        }

        var deleteCell = newRow.insertCell(9);
        deleteCell.innerHTML = '<button type="button" class="btn btn-danger" onclick="deleteContact(this)">Delete</button>';
    });
</script>

<script type="text/javascript">
    $(document).on('change', '#bill_code_number', function () {
        ord = '{{ord_no}}'
        sale_ord = "{{sale_list}}"
        ord_value = $('#bill_code_number').val();
        if (sale_ord === '') {
            document.getElementById('dangerdiv').style.display = 'none';

        }
        else {
            if (ord_value != ord) {
                alert('The Next Number is ' + ord)
                document.getElementById('bill_code_number').value = ord;
            } else {
                document.getElementById('dangerdiv').style.display = 'none';
            }
        }
        var sale_list = "{{sale_list}}";
        salelist = sale_list.split(",");
        for (let i = 0; i < salelist.length; i++) {
            if (ord_value == salelist[i]) {
                alert('Sale Order Number already in use.')
                document.getElementById('dangerdiv').style.display = 'none';
                document.getElementById('bill_code_number').value = ''
            }
        }
    })
</script>
<script>

    $(document).ready(function () {

        // Get the CSRF token from the cookie
        function getCookie(name) {
            var cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                var cookies = document.cookie.split(';');
                for (var i = 0; i < cookies.length; i++) {
                    var cookie = cookies[i].trim();
                    // Does this cookie string begin with the name we want?
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
        var csrftoken = getCookie('csrftoken');

        // Pan Number Check

        $('#panInput').on('input', function () {
            var panNumber = $(this).val();
            var regex = /[A-Z]{5}[0-9]{4}[A-Z]{1}$/;
            if (regex.test(panNumber)) {
                $('#panMessage').text('PAN number is valid.').css('color', 'green');
                // PAN number is valid, call AJAX to check if it exists
                $.ajax({
                    url: "{% url 'check_pan' %}",
                    headers: { 'X-CSRFToken': csrftoken },
                    type: 'POST',
                    data: { panNumber: panNumber },
                    success: function (response) {
                        if (response.status == 'exists') {
                            $('#panMessage').text('PAN number already exists.').css({
                                'color': 'red',
                                'font-size': '12px'
                            });

                        }
                    }
                });
            } else {
                $('#panMessage').text('Please enter a valid PAN number.').css({
                    'color': 'red',
                    'font-size': '12px'
                });
            }
        });

        // Pna Number Check End 


        // GST Number Check 

        $('#gstInput').on('input', function () {
            var gstNumber = $(this).val();
            var regex = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}[0-9A-Z]{1}[0-9A-Z]$/;
            if (regex.test(gstNumber)) {
                $('#gstMessage').text('GST number is valid.').css('color', 'green');
                // GST number is valid, call AJAX to check if it exists
                $.ajax({
                    url: "{% url 'check_gst' %}",
                    headers: { 'X-CSRFToken': csrftoken },
                    type: 'POST',
                    data: { gstNumber: gstNumber },
                    success: function (response) {
                        if (response.status == 'exists') {
                            $('#gstMessage').text('GST number already exists.').css({
                                'color': 'red',
                                'font-size': '12px'
                            });

                        }
                    }
                });
            }
            else {
                $('#gstMessage').text('Please enter a valid GST number.').css({
                    'color': 'red',
                    'font-size': '12px'
                });
            }
        });

        // GST Number Check End 

    });

    // Name display 


    const Title = document.getElementById('select1');
    const fname = document.getElementById('fname');
    const laname = document.getElementById('lname');
    const vDisplayName = document.getElementById('v_display_name');

    // Listen for input events on the initial input fields
    Title.addEventListener('input', updateOutputFields);
    fname.addEventListener('input', updateOutputFields);
    laname.addEventListener('input', updateOutputFields);

    // Function to update the output fields
    function updateOutputFields() {
        const selectedTitle = Title.value;
        const selectedFname = fname.value;
        const selectedLname = laname.value;

        // Clear existing options
        vDisplayName.innerHTML = '';
        // Add new options based on input field values
        const option1 = document.createElement('option');
        option1.text = selectedTitle + ' ' + selectedFname + ' ' + selectedLname;
        vDisplayName.add(option1);



        const option2 = document.createElement('option');
        option2.text = selectedFname + ' ' + selectedLname;
        vDisplayName.add(option2);

        const option3 = document.createElement('option');
        option3.text = selectedLname + ' ' + selectedFname;
        vDisplayName.add(option3);
    }

</script>






<script>
    function gstPan_function() {
        var x = document.getElementById('GSTT').value
        if (x == "Unregistered Business-not Registered under GST") {
            document.getElementById("pan").style.display = "block";
            document.getElementById("gst").style.display = "none";


        }
        else if ((x == "Registered Business-Regular Business that is registered under GST") || (x == "Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x == "Overseas- Persons with who you do import or exports of supplies outside india") || (x == "Special Economic Zone")) {
            document.getElementById("gst").style.display = "block";
            document.getElementById("pan").style.display = "block";


        }

    }



    $(document).ready(function () {
        $(".toggle1").click(function (e) {
            e.preventDefault();
            $("fieldset1").toggle();
        })
    })
    $(document).ready(function () {
        $(".toggle2").click(function (e) {
            e.preventDefault();

            $("fieldset2").toggle();
            $("fieldset5").hide();
            $("fieldset6").hide();
            $("fieldset7").hide();



        })
    })

    $(document).ready(function () {
        $(".toggle3").click(function (e) {
            e.preventDefault();
            $("fieldset5").toggle();
            $("fieldset2").hide();
            $("fieldset6").hide();
            $("fieldset7").hide();

        })
    })
    $(document).ready(function () {
        $(".toggle4").click(function (e) {
            e.preventDefault();
            $("fieldset6").toggle();
            $("fieldset2").hide();
            $("fieldset5").hide();
            $("fieldset7").hide();

        })
    })
    $(document).ready(function () {
        $(".toggle7").click(function (e) {
            e.preventDefault();
            $("fieldset7").toggle();
            $("fieldset2").hide();
            $("fieldset6").hide();
            $("fieldset5").hide();



        })
    })



    $('document').ready(function () {
        $('.add_another').click(function () {
            $("#tbl").append(`<tr>
            <td>
                <select name="salutation[]" id="PLACE" class="form-control bg-transparent border-1 text-white">
                    <option value="Mr" class="text-dark" selected>Mr.</option>
                    <option class="text-dark" value=""Mrs">Mrs.</option>
                    <option class="text-dark" value="Ms">Ms.</option>
                    <option class="text-dark" value="Miss">Miss.</option>
                    <option class="text-dark" value="Dr">Dr.</option>
                </select>  
            </td>
            <td>
                <input type="text" name="first_name[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="text" name="last_name[]" class="form-control border-1 bg-transparent text-white"   value="" />
            </td>
            <td>
                <input type="email" name="email[]" class="form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td>
                <input type="tel" pattern="[0-9]{7}" id="twphone" name="wphone[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="tel" pattern="[0-9]{10}" id="tmobile" onclick="sample1()" name="mobile[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="number" onclick="sample()" name="skype[]" class="form-control border-1 bg-transparent text-white"  value="" />
            </td>
            <td>
                <input type="text" name="designation[]" class="form-control border-1 bg-transparent text-white" value="" />
            </td>
            <td>
                <input type="text" name="department[]" class="form-control border-1 bg-transparent text-white" value="" />
            </td>
        </tr>`);
        });
    })

    function fieldset5_functions() {
        document.getElementById("adress").style.display = "block";
    }



    function myCopyAddressFunctions() {
        var checkBox = document.getElementById("myCheckTs");
        var textatn = document.getElementById("battens");
        var txtcry = document.getElementById("bctrys");
        var txtadrs11 = document.getElementById("badd1s");
        var txtcty = document.getElementById("bctys");
        var txtstat = document.getElementById("bstes");
        var txtzip = document.getElementById("bzps");
        var txtphone = document.getElementById("bphone_nums");
        var txtfx = document.getElementById("bfxs");

        var textatn1 = document.getElementById("sattens");
        var txtcry1 = document.getElementById("sctrys");
        var txtadrs21 = document.getElementById("sadd1s");
        var txtcty1 = document.getElementById("sctys");
        var txtstat1 = document.getElementById("sstes");
        var txtzip1 = document.getElementById("szps");
        var txtphone1 = document.getElementById("sphone_nums");
        var txtfx1 = document.getElementById("sfxs");
        if (checkBox.checked == true) {
            textatn1.value = textatn.value;
            txtadrs21.value = txtadrs11.value;
            txtcty1.value = txtcty.value;
            txtstat1.value = txtstat.value;
            txtzip1.value = txtzip.value;
            txtphone1.value = txtphone.value;
            txtfx1.value = txtfx.value;

        } else {
            txtadrs21.value = "";
            txtcty1.value = "";
            txtstat1.value = "";
            txtzip1.value = "";
            txtphone1.value = "";
            txtfx1.value = "";
            txtcry1.value = "";
            textatn1.value = "";


        }
    }

    function open_table() {
        document.getElementById("hid").style.display = "block";

    }


    function bphone_numbers() {
        var a1 = document.getElementById("bphone_nums").value;
        var b1 = document.getElementById("bphone_labels");
        var expr = /^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Invalid Phone Number.";
        }
        else {
            b1.style.color = "green";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Valid Phone Number.";

        }
    }

    function sphone_numbers() {
        var a1 = document.getElementById("sphone_nums").value;
        var b1 = document.getElementById("sphone_labels");
        var expr = /^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Invalid Fax Number.";
        }
        else {
            b1.style.color = "green";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Valid Fax Number.";

        }
    }


    function fax_numbers() {
        var a1 = document.getElementById("bfxs").value;
        var b1 = document.getElementById("fax_labels");
        var expr = /^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Invalid Fax Number.";
        }
        else {
            b1.style.color = "green";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Valid Fax Number.";

        }
    }

    function sfax_numbers() {
        var a1 = document.getElementById("sfxs").value;
        var b1 = document.getElementById("sfax_labels");
        var expr = /^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Invalid Phone Number.";
        }
        else {
            b1.style.color = "green";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Valid Phone Number.";

        }
    }

    function samples() {

        var tbldata = document.getElementById("tbls");
        var total_rows = tbldata.rows.length;
        x = document.getElementById("tbls");
        var a1 = x.rows[total_rows - 1].cells[5].getElementsByTagName('input')[0].value;

        var b1 = document.getElementById("tlabels");

        b1.innerHTML = "";

        var expr = /^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.innerHTML = "Invalid";
            b1.style.fontSize = "0.750rem";
        }
        else {
            b1.style.color = "green";
            b1.innerHTML = "Valid";
            b1.style.fontSize = "0.750rem";

        }



    }

    function samples1() {

        var tbldata = document.getElementById("tbls");
        var total_rows = tbldata.rows.length;
        x = document.getElementById("tbls");
        var a1 = x.rows[total_rows - 1].cells[4].getElementsByTagName('input')[0].value;

        var b1 = document.getElementById("twph_labels");

        b1.innerHTML = "";

        var expr = /^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.innerHTML = "Invalid";
            b1.style.fontSize = "0.750rem";
        }
        else {
            b1.style.color = "green";
            b1.innerHTML = "valid";
            b1.style.fontSize = "0.750rem";

        }


    }




    function bphone_number() {
        var a1 = document.getElementById("bphone_num").value;
        var b1 = document.getElementById("bphone_label");
        var expr = /^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Invalid Phone Number.";
        }
        else {
            b1.style.color = "green";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Valid Phone Number.";

        }
    }

    function sphone_number() {
        var a1 = document.getElementById("sphone_num").value;
        var b1 = document.getElementById("sphone_label");
        var expr = /^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Invalid Fax Number.";
        }
        else {
            b1.style.color = "green";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Valid Fax Number.";

        }
    }

    function fax_number() {
        var a1 = document.getElementById("bfx").value;
        var b1 = document.getElementById("fax_label");
        var expr = /^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Invalid Fax Number.";
        }
        else {
            b1.style.color = "green";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Valid Fax Number.";

        }
    }

    function sfax_number() {
        var a1 = document.getElementById("sfx").value;
        var b1 = document.getElementById("sfax_label");
        var expr = /^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Invalid Phone Number.";
        }
        else {
            b1.style.color = "green";
            b1.style.fontSize = "0.750rem";
            b1.innerHTML = "Valid Phone Number.";

        }
    }


    function sample() {

        var tbldata = document.getElementById("tbl");
        var total_rows = tbldata.rows.length;
        x = document.getElementById("tbl");
        var a1 = x.rows[total_rows - 1].cells[5].getElementsByTagName('input')[0].value;

        var b1 = document.getElementById("tlabel");

        b1.innerHTML = "";

        var expr = /^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.innerHTML = "Invalid";
            b1.style.fontSize = "0.750rem";
        }
        else {
            b1.style.color = "green";
            b1.innerHTML = "Valid";
            b1.style.fontSize = "0.750rem";

        }



    }

    function sample1() {

        var tbldata = document.getElementById("tbl");
        var total_rows = tbldata.rows.length;
        x = document.getElementById("tbl");
        var a1 = x.rows[total_rows - 1].cells[4].getElementsByTagName('input')[0].value;

        var b1 = document.getElementById("twph_label");

        b1.innerHTML = "";

        var expr = /^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color = "red";
            b1.innerHTML = "Invalid";
            b1.style.fontSize = "0.750rem";
        }
        else {
            b1.style.color = "green";
            b1.innerHTML = "valid";
            b1.style.fontSize = "0.750rem";

        }


    }


</script>

<script>
    $(document).on("click", "#CtermSave", function () {


        $.ajax({
            type: 'POST',
            url: "{% url 'customer_payment_terms_add' %}",

            data: {
                name: $("#tnames").val(),
                days: $("#tdayss").val(),

                csrfmiddlewaretoken: '{{ csrf_token }}'

            },

            success: function (response) {
                $("#tnames").val('')
                $("#tdayss").val('')
                var paytearmSelect = $('#paytearm-selects');
                paytearmSelect.empty();  // Clear existing options


                // Add "Select" option
                paytearmSelect.append('<option value="Due on Receipt" selected>Due on Receipt</option>');

                // Add new options based on the Ajax response
                $.each(response.payment_list, function (index, pay_terms) {
                    paytearmSelect.append('<option value="' + pay_terms.id + '">' + pay_terms.name + '</option>');
                });
                // reloadPayment();
            },
        });
    });

</script>

<script>
    // Get the input element
    const inputElements = document.getElementById("tnames");

    // Add event listener for input event
    inputElements.addEventListener("input", function () {
        // Convert the input value to uppercase
        this.value = this.value.toUpperCase();
    });
</script>
<script>

    $(document).ready(function () {
        $('#tnames').on('input', function () {

            var termName = $(this).val();

            $.ajax({
                type: 'GET',
                url: '{% url "check_customer_term_exist" %}',
                data: {
                    term_name: termName
                },
                success: function (response) {
                    if (response.exists) {
                        $('#message-ids').text('Term already exists !');
                        $('#success-message-ids').text('');

                        $('#tnames').val('');
                    } else {
                        $('#success-message-ids').text('Term name available !');
                        $('#message-ids').text('');
                    }

                },
                error: function (xhr, status, error) {
                    console.error('Error:', error);
                }
            });
        });
    });


    $('#customer-email').on('input', function () {

        var vendorEmail = $(this).val();
        console.log(vendorEmail)
        $.ajax({
            type: 'GET',
            url: '{% url "check_customer_email_exist" %}',
            data: {
                vendor_email: vendorEmail
            },
            success: function (response) {
                if (response.exists) {
                    $('#email-message-ids').text('Email id already exists !');
                    $('#customer-email').val('');
                }
                else {
                    $('#email-message-ids').text('');
                }

            },
            error: function (xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });


    $('#workphones').on('input', function () {

        var wPhone = $(this).val();

        $.ajax({
            type: 'GET',
            url: '{% url "check_customer_work_phone_exist" %}',
            data: {
                w_Phone: wPhone
            },
            success: function (response) {
                if (response.exists) {
                    $('#workphone_labels').text('Work phone number already exists !');
                    $('#workphones').val('');
                }
                else {
                    $('#workphone_labels').text('');
                }

            },
            error: function (xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });

    $('#mphones').on('input', function () {

        var mPhone = $(this).val();

        $.ajax({
            type: 'GET',
            url: '{% url "check_customer_phonenumber_exist" %}',
            data: {
                m_Phone: mPhone
            },
            success: function (response) {
                if (response.exists) {
                    $('#mphone_labels').text('Phone number already exists !');
                    $('#mphones').val('');
                }
                else {
                    $('#mphone_labels').text('');
                }

            },
            error: function (xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });

</script>
<!-- -----------------------due date----------------- -->
<script>

    // document.getElementById("cancelButton").addEventListener("click", function() {
    //   document.getElementById("myForm").reset(); 
    //   location.reload(); 
    // });
    function toggleDateInput() {
        var checkbox = document.getElementById("never-expire-checkbox");
        var billDateInput = document.getElementById("date1");
        var dateInput = document.getElementById("date2");
    
        if (checkbox.checked) {
            dateInput.disabled = true; // Disable date input
            $('#date2').val($('#date1').val()); // Set date2 value to date1 value
            $("#terms").val("recpt");
        } else {
            dateInput.disabled = true; // Disable date input
        }
    }
    
    $(document).ready(function() {
        $('#terms').change(function() {
            var va = $(this).val();
            var checkbox = $('#never-expire-checkbox');
    
            if (va == 'recpt') {
                checkbox.prop('checked', true); // Check the checkbox
                $('#date2').val($('#date1').val()); // Set date2 value to date1 value
                $('#date2').prop('disabled', true); // Disable date input
            } else {
                checkbox.prop('checked', false); // Uncheck the checkbox
                $('#date2').prop('disabled', true); // Disable date input
            }
        });
    
        toggleDateInput(); // Call toggleDateInput after the page loads to prevent dateInput from being enabled on page load
    });
    
</script>  

<!-- ------------------------------end------------------------------- -->
<script>
    // Work Phone Number Validation 
    $(document).ready(function () {
        $('#workphones').on('input', function () {
            var inputVal = $(this).val();
            var expr = /^[0-9]{7}$/;
            if (expr.test(inputVal)) {
                $('#work-phone-messages').text('Valid work phone number').css('color', 'green');
            } else {
                $('#work-phone-messages').text('Invalid work phone number').css('color', 'red');
            }
        });
    });

    // Phone Number Validation
    $(document).ready(function () {
        $('#mphones').on('input', function () {
            var inputVal = $(this).val();
            var expr = /^[0-9]{10}$/;
            if (expr.test(inputVal)) {
                $('#phone-messages').text('Valid  phone number').css('color', 'green');
            } else {
                $('#phone-messages').text('Invalid  phone number').css('color', 'red');
            }
        });
    });
</script>


<script type="text/javascript">
    function vendor_display() {
        var x = document.getElementById("select1").value;
        var y = document.getElementById("fname").value;
        var z = document.getElementById("lname").value;

        document.getElementById("select2").innerHTML = x + " " + y + " " + z


    }
</script>

<script>
    $(document).on("click", "#termSave", function () {


        $.ajax({
            type: 'POST',
            url: "{% url 'payment_terms_add' %}",

            data: {
                name: $("#tname").val(),
                days: $("#tdays").val(),

                csrfmiddlewaretoken: '{{ csrf_token }}'

            },

            success: function (response) {
                $("#tname").val('')
                $("#tdays").val('')
                var paytearmSelect = $('#paytearm-select');
                paytearmSelect.empty();  // Clear existing options


                // Add "Select" option
                paytearmSelect.append('<option value="Due on Receipt" selected>Due on Receipt</option>');

                // Add new options based on the Ajax response
                $.each(response.payment_list, function (index, pay_terms) {
                    paytearmSelect.append('<option value="' + pay_terms.id + '">' + pay_terms.name + '</option>');
                });
                // reloadPayment();
            },
        });
    });


</script>
<script>
    // Get the input element
    const inputElement = document.getElementById("tname");

    // Add event listener for input event
    inputElement.addEventListener("input", function () {
        // Convert the input value to uppercase
        this.value = this.value.toUpperCase();
    });
</script>

<script>

    $(document).ready(function () {
        $('#tname').on('input', function () {

            var termName = $(this).val();

            $.ajax({
                type: 'GET',
                url: '{% url "check_term_exist" %}',
                data: {
                    term_name: termName
                },
                success: function (response) {
                    if (response.exists) {
                        $('#message-id').text('Term already exists !');
                        $('#success-message-id').text('');

                        $('#tname').val('');
                    } else {
                        $('#success-message-id').text('Term name available !');
                        $('#message-id').text('');
                    }

                },
                error: function (xhr, status, error) {
                    console.error('Error:', error);
                }
            });
        });
    });

    $('#vendor-email').on('input', function () {

        var vendorEmail = $(this).val();
        console.log(vendorEmail)
        $.ajax({
            type: 'GET',
            url: '{% url "check_email_exist" %}',
            data: {
                vendor_email: vendorEmail
            },
            success: function (response) {
                if (response.exists) {
                    $('#email-message-id').text('Email id already exists !');
                    $('#vendor-email').val('');
                }
                else {
                    $('#email-message-id').text('');
                }

            },
            error: function (xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });

    $('#workphone').on('input', function () {

        var wPhone = $(this).val();

        $.ajax({
            type: 'GET',
            url: '{% url "check_work_phone_exist" %}',
            data: {
                w_Phone: wPhone
            },
            success: function (response) {
                if (response.exists) {
                    $('#workphone_label').text('Work phone number already exists !');
                    $('#workphone').val('');
                }
                else {
                    $('#workphone_label').text('');
                }

            },
            error: function (xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });


    $('#mphone').on('input', function () {

        var mPhone = $(this).val();

        $.ajax({
            type: 'GET',
            url: '{% url "check_phonenumber_exist" %}',
            data: {
                m_Phone: mPhone
            },
            success: function (response) {
                if (response.exists) {
                    $('#mphone_label').text('Phone number already exists !');
                    $('#mphone').val('');
                }
                else {
                    $('#mphone_label').text('');
                }

            },
            error: function (xhr, status, error) {
                console.error('Error:', error);
            }
        });
    });

</script>



<script>
    // Work Phone Number Validation 
    $(document).ready(function () {
        $('#workphone').on('input', function () {
            var inputVal = $(this).val();
            var expr = /^[0-9]{7}$/;
            if (expr.test(inputVal)) {
                $('#work-phone-message').text('Valid work phone number').css('color', 'green');
            } else {
                $('#work-phone-message').text('Invalid work phone number').css('color', 'red');
            }
        });
    });

    // Phone Number Validation
    $(document).ready(function () {
        $('#mphone').on('input', function () {
            var inputVal = $(this).val();
            var expr = /^[0-9]{10}$/;
            if (expr.test(inputVal)) {
                $('#phone-message').text('Valid  phone number').css('color', 'green');
            } else {
                $('#phone-message').text('Invalid  phone number').css('color', 'red');
            }
        });
    });
</script>

<!-- ---------------------------------table---------------------- -->
<script>

    $(document).ready(function () {


        $('#add').click(function () {
            var table = document.getElementById("items-table-body");
            var roinc = table.rows.length;

            $('#items-table-body').append(

                `<tr id='addr${roinc}' class = 'addr '>
      <td  style="color: white;"><span id="slnum${roinc}">${roinc + 1}</span></td>
      
      <td >
        <div class="d-flex">
          
          <select name='item[]' id='item${roinc}' class="form-control item  border-0  text-center select2"
                                                          style="color: white; background-color: white;" onchange="showRate(this.id,this.value,${roinc})">
                              <option value=" " selected disabled class='text-black bg-white' >Select</option>
                              
                              {% for i in item_obj %}
                                 
                                      <option value="{{ i.id }}" class='text-black bg-white'>{{ i.item_name  }} </option>
                               
                              {% endfor %}

                              
          </select>

          <a href="#">
                                <button type="button" class="btn btn-warning ml-1 ms-3" 
                                data-target="#create_item" data-toggle="modal"><i class="fa fa-plus fs-4 text-white"></i></a></button>
                            </a>
        </div>  
      </td>

      <td style="width: 11%;">
        <input type="text" name='HSN[]' id="HSN${roinc}" value="0" class="bg-transparent border-0 text-white text-right HSN text-dark bg-light"   style="width: 52px; " />
      </td>

     
      <td style="width: 10%;">
        <input type="number" name='qty[]' value="0" placeholder='Qty' id="qty${roinc}"  class="bg-transparent border-0 text-white text-right qty text-dark bg-light" step=0 min=0 style="width: 50px;" />
        <br>
        <span class="text-warning">Available Stock : <span id="stock_data${roinc}" class="text-warning stock_data"></span></span>
        <input  type="text" hidden class="stock_data_hidden" name ='stock[]' id="stock_data_hidden${roinc}" value="0"/>
      </td>
      <td style="width: 10%;">
        <input type="text" name='rate[]' id="rate${roinc}" value="0.00" style="width: 70px;" class="bg-transparent border-0 text-white text-right rate text-dark bg-light" />
      </td>
      <td style="width: 15%;">
        <input type="hidden" id="tax_total0" class="form-control mb-2 d-none" >
        <input type="text" placeholder="Select TAX" class="form-control selecttax text-dark bg-light" id="selecttax${roinc}" style = "width:100px;" >
        <select name="tax1[]" id="intra_tax${roinc}" class="form-control tax1 d-none mb-2 text-dark bg-light" >
            <option id="ta1" value=0 text=" ">Choose GST</option>
            <option value=28 text="{{ cmp1.state }}">28.0% GST</option>
            <option value=18 text="{{ cmp1.state }}">18.0% GST</option>
            <option value=12 text="{{ cmp1.state }}">12.0% GST</option>
            <option value=5 text="{{ cmp1.state }}">05.0% GST</option>
            <option value=3 text="{{ cmp1.state }}">03.0% GST</option>
            <option value=0 text="{{ cmp1.state }}">0.0% GST</option>
        </select>

        <select name="tax2[]" id="inter_tax${roinc}" class="form-control tax2 d-none mb-2 text-dark bg-light">
          <option id="ta5" value=0 text=" " >Choose IGST</option>
          <option value=28 text="{{ cmp1.state }}">28.0% IGST</option>
          <option value=18 text="{{ cmp1.state }}">18.0% IGST</option>
          <option value=12 text="{{ cmp1.state }}">12.0% IGST</option>
          <option value=5 text="{{ cmp1.state }}">05.0% IGST</option>
          <option value=3 text="{{ cmp1.state }}">03.0% IGST</option>
          <option value=0 text="{{ cmp1.state }}">0.0% IGST</option>
        </select>
      </td>
        
      <td style="width: 11%;">
        <input type="text" name='discount[]' id="disc${roinc}" style="width: 60px;" value='0.00' class="bg-transparent border-0 text-white text-right disc text-dark bg-light" step="0.00" min="0"/>
      </td>
      <td style="width: 11%;">
        <input type="text" name='amount[]' id="amount${roinc}"  style="width: 60px;" value='0.00' class="bg-transparent border-0 text-white text-right amount text-dark bg-light" step="0.00" min="0"/>
      </td>
        
      <td>
        <button type="button" id="${roinc}" class="btn btn-light font-weight-bold clone_row fa fa-clone px-1 my-1 py-1 mx-1" data-toggle= "tooltip" data-placement="bottom" tooltip="Clone"
            style = "width:25px; height: 25px; border-radius: 90% " >
          
        </button> <br>
        <button type="button" id="${roinc}" class="btn btn-danger text-center remove_row fa fa-close px-1 my-1 py-1 mx-1" data-toggle= "tooltip" data-placement="bottom" tooltip="Remove"
        style = "width:25px; height: 25px; border-radius: 90% " >
          
        </button>
      </td>
    </tr>`


            );
            $(`#item${roinc}`).select2();
            reloadItem();
        });
    });

    $(document).ready(function () {
        // Clone Row
        $(document).on('click', '.clone_row', function () {
            var row = $(this).closest('tr');
            var clone = row.clone();
            // Update input values in the cloned row
            row.find('input, select').each(function(index, element) {
                var originalValue = $(element).val();
                clone.find('input, select').eq(index).val(originalValue);
            });
            row.after(clone);
        });

        // Remove Row
        $(document).on('click', '.remove_row', function () {
            var row = $(this).closest('tr');
            row.remove();
        });
    
    
        clone.each(function (index) {
            var value1 = $(this).val();
            var newId = roinc;
            newRow.find('.clone_row').eq(index).attr('id', newId);

        });
        rm.each(function (index) {
            var value1 = $(this).val();
            var newId = roinc;
            newRow.find('.remove_row').eq(index).attr('id', newId);

        });
        item.each(function (index) {
            debugger
            var value1 = $(this).val();
            var idPrefix = 'item';
            var newId = idPrefix + roinc;
            newRow.find('.item').eq(index).attr('id', newId);
            newRow.find('.select2-container').remove();
            newItem = $(this).val();
        });
        qnty.each(function (index) {
            var value2 = $(this).val();
            var idPrefix = 'qty';
            var newId = idPrefix + roinc;
            newRow.find('.qty').eq(index).val(value2).attr('id', newId);
        });
        rt.each(function (index) {
            var value3 = $(this).val();
            var idPrefix = 'rate';
            var newId = idPrefix + roinc;
            newRow.find('.rate').eq(index).val(value3).attr('id', newId);

        });
        amnt.each(function (index) {
            var value4 = $(this).val();
            var idPrefix = 'amount';
            var newId = idPrefix + roinc;
            newRow.find('.amount').eq(index).val(value4).attr('id', newId);

        });

        disc.each(function (index) {
            var value5 = $(this).val();
            var idPrefix = 'disc';
            var newId = idPrefix + roinc;
            newRow.find('.disc').eq(index).val(value5).attr('id', newId);

        });
        accnt.each(function (index) {
            var value6 = $(this).val();
            var idPrefix = 'account';
            var newId = idPrefix + roinc;
            newRow.find('.acnt').eq(index).val(value6).attr('id', newId);

        });

        intra.each(function (index) {
            var value7 = $(this).val();
            var idPrefix = 'intra_tax';
            var newId = idPrefix + roinc;
            newRow.find('.tax1').eq(index).val(value7).attr('id', newId);
        });

        inter.each(function (index) {
            var value8 = $(this).val();
            var idPrefix = 'inter_tax';
            var newId = idPrefix + roinc;
            newRow.find('.tax2').eq(index).val(value8).attr('id', newId);
        });

        hsn.each(function (index) {
            var value9 = $(this).val();
            var idPrefix = 'HSN';
            var newId = idPrefix + roinc;
            newRow.find('.HSN').eq(index).val(value9).attr('id', newId);
        });

        slnum.each(function (index) {
            debugger
            newRow.find('.slnum').eq(index)[0].innerText = roinc + 1
        });
        stock_data_hidden.each(function (index) {
            var value10 = $(this).val();
            var idPrefix = 'stock_data_hidden';
            var newId = idPrefix + roinc;
            newRow.find('.stock_data_hidden').eq(index).val(value10).attr('id', newId);
        });
        stock_data.each(function (index) {
            debugger
            var value11 = $(this).val();
            var idPrefix = 'stock_data';
            var newId = idPrefix + roinc;
            newRow.find('.stock_data').eq(index).attr('id', newId);
        });

        var buttonCell = $('<td>').append(`
        <button type="button" id="${roinc}" class="btn btn-outline-primary clone_row text-center mb-1 p-1 " data-toggle= "tooltip" data-placement="bottom" tooltip="Clone"
            style = "width:25px; height: 25px; border-radius: 90% " >
          <i class="fa-solid fa-clone"></i>
        </button> <br>
        <button type="button" id="${roinc}" class="btn btn-outline-danger remove_row text-center p-1" data-toggle= "tooltip" data-placement="bottom" tooltip="Remove"
            style = "width:25px; height: 25px; border-radius: 90% " >
          <i class="fa fa-window-close"></i>
        </button>
      `);
        newRow.find('td:last-child').replaceWith(buttonCell);


        row.after(newRow);
        $(`#item${roinc}`).select2();
        $(`#item${roinc}`).val(newItem);
        $(`#item${roinc}`).trigger('change');
        $(".select2-container").width('auto');


        //recalculate after new row added

        var row_c = $("#items-table-body tr").length;
        var amount_t = 0;
        var tax = 0;
        var tax_tot = 0;
        var ship = parseFloat($("#addcharge").val());
        for (var i = 0; i < row_c; i++) {
            amount_t += parseFloat($("#amount" + i).val());

            $("#subtotal").val(amount_t);

            var tax1 = $("#intra_tax" + i).val();
            var tax2 = $("#inter_tax" + i).val();
            if (tax1 == 0) {
                if (tax2 == 0) {
                    tax = 0;
                    tax_tot += tax;
                }
                else {
                    tax = (($("#qty" + i).val()) * ($("#rate" + i).val())) * (tax2 / 100);

                    tax_tot += tax;
                    $("#igst").val(tax_tot);
                    $("#total_taxamount").val(tax_tot);
                }
            }
            else {

                tax = (($("#qty" + i).val()) * ($("#rate" + i).val())) * (tax1 / 100);
                tax_tot += tax;
                $("#sgst").val(tax_tot / 2);
                $("#cgst").val(tax_tot / 2);
                $("#total_taxamount").val(tax_tot);
            }
            if (ship) {
                $("#grandtotal").val(amount_t + tax_tot + ship)
            }
            else {
                $("#grandtotal").val(amount_t + tax_tot)
            }
        }

        $("#items-table-body").find('tr').each(function (i, el) {
            debugger
            $(this).find('td').eq(0).text(i + 1);
        });
    });

    $(document).on('click', '.remove_row', function () {

        var row_id = $(this).attr("id");
        $('#addr' + row_id + '').remove();

        $("#items-table-body").find('tr').each(function (i, el) {
            debugger
            $(this).find('td').eq(0).text(i + 1);
        });

        $('tr[id^="addr"]').each(function (index) {
            var new_row_id = 'addr' + (index);
            $(this).attr('id', new_row_id);

            $(this).find('select[id^="item"]').each(function (tdIndex) {
                var new_td_id = 'item' + (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });
            $(this).find('input[id^="HSN"]').each(function (tdIndex) {
                var new_td_id = 'HSN' + (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });

            $(this).find('input[id^="qty"]').each(function (tdIndex) {
                var new_td_id = 'qty' + (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });
            $(this).find('input[id^="rate"]').each(function (tdIndex) {
                var new_td_id = 'rate' + (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });
            $(this).find('input[id^="disc"]').each(function (tdIndex) {
                var new_td_id = 'disc' + (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });
            $(this).find('input[id^="amount"]').each(function (tdIndex) {
                var new_td_id = 'amount' + (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });
            $(this).find('select[id^="intra_tax"]').each(function (tdIndex) {
                var new_td_id = 'intra_tax' + (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });
            $(this).find('select[id^="inter_tax"]').each(function (tdIndex) {
                var new_td_id = 'inter_tax' + (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });
            $(this).find('.clone_row').each(function (tdIndex) {
                var new_td_id = (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });
            $(this).find('.remove_row').each(function (tdIndex) {
                var new_td_id = (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });
            $(this).find('.slnum').each(function (tdIndex) {
                debugger
                var new_td_id = (index * 1 + tdIndex);
                $(this).attr('id', new_td_id);
            });

            // $(this).find('button').each(function(tdIndex) {
            //   var new_td_id = (index * 1 + tdIndex);
            //   $(this).attr('id', new_td_id);
            // });
            // $(this).find('button[class="remove_row"]').each(function(tdIndex) {
            //   var new_td_id1 = ((index * 1) + tdIndex);
            //   $(this).attr('id', new_td_id1);
            // });
            var row_c = $("#items-table-body tr").length;
            var amount_t = 0;
            var tax = 0;
            var tax_tot = 0;
            var ship = parseFloat($("#addcharge").val());
            for (var i = 0; i < row_c; i++) {
                amount_t += parseFloat($("#amount" + i).val());

                $("#subtotal").val(amount_t);

                var tax1 = $("#intra_tax" + i).val();
                var tax2 = $("#inter_tax" + i).val();

                if (tax1 == 0) {
                    if (tax2 == 0) {
                        tax = 0;
                        tax_tot += tax;
                    }
                    else {
                        tax = (($("#qty" + i).val()) * ($("#rate" + i).val())) * (tax2 / 100);

                        tax_tot += tax;
                        // console.log(tax_tot);
                        $("#igst").val(tax_tot);
                        $("#total_taxamount").val(tax_tot);
                    }
                }
                else {

                    tax = (($("#qty" + i).val()) * ($("#rate" + i).val())) * (tax2 / 100);
                    tax_tot += tax;
                    $("#sgst").val(tax_tot / 2);
                    $("#cgst").val(tax_tot / 2);
                    $("#total_taxamount").val(tax_tot);
                }
                if (ship) {
                    $("#grandtotal").val(amount_t + tax_tot + ship)
                }
                else {
                    $("#grandtotal").val(amount_t + tax_tot)
                }
            }
        });

    });

</script>

<!-- ----------------------------------end table--------------------------------- -->

<script>
    function message() {

        var vals = document.getElementById('soValue1').value
        console.log(vals)
        if (vals == "Other Assets") {
            document.getElementById('message_hd').innerHTML = "Assets"
            document.getElementById('message').innerHTML = "Track special assets like goodwill and other intangible assets"
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("cr_div").style.display = "none";

        } else if (vals == "Other Current Assets") {
            document.getElementById('message_hd').innerHTML = "Any short term asset that can be converted into cash or cash equivalents easily<ul style='list-style-type: disc;'><li>Prepaid expenses</li><li>Stocks and Mutual Funds</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account").checked = false;
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "block";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";

            $('#message').append(
                `Any short term asset that can be converted into cash or cash equivalents easily 
          <ul><li>Prepaid expenses</li> <li>Stocks and Mutual Funds</li></ul>`
            )

        } else if (vals == "Cash") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of cash and other cash equivalents like petty cash, undeposited funds, etc.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account22").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div22").style.display = "block";
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            $('#message').append(
                `To keep track of cash and other cash equivalents like petty cash, undeposited funds, etc.`
            )

        } else if (vals == "Bank") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of bank accounts like Savings, Checking, and Money Market accounts.";

            document.getElementById('').innerHTML = "Assets"
            document.getElementById('message').innerHTML = ""
            document.getElementById("cr_div").style.display = "block";
            document.getElementById("acc_bo_div").style.display = "block";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            $('#message').append(
                `To keep track of bank accounts like Savings, Checking, and Money Market accounts`
            )

        } else if (vals == "Fixed Asset") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>Any long term investment or an asset that cannot be converted into cash easily like:<ul><li>Land and Buildings</li><li>Plant, Machinery and Equipment</li><li>Computers</li><li>Furniture</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account33").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div33").style.display = "block";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            $('#message').append(
                `Any long term investment or an asset that cannot be converted into cash easily like: 
          <ul><li>Land and Buildings</li> <li>Plant, Machinery and Equipment</li> <li>Computers</li> <li>Furniture</li></ul>`
            )

        } else if (vals == "Stock") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of your inventory assets.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account44").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div44").style.display = "block";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("cr_div").style.display = "none";
            $('#message').append(
                `To keep track of your inventory assets.`
            )

        } else if (vals == "Payment Clearing") {
            document.getElementById('message_hd').innerHTML = "Assets<br><br>To keep track of funds moving in and out via payment processors like Stripe, PayPal, etc.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";
            $('#message').append(
                `To keep track of funds moving in and out via payment processors like Stripe, PayPal, etc.`
            )

        } else if (vals == "Other Current Liability") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Any short term liability like:<ul><li>Customer Deposits</li><li>Tax Payable</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account55").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "block";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";

            $('#message').append(
                `Any short term liability like:
          <ul><li>Customer Deposits</li> <li>Tax Payable</li></ul>`
            )

        } else if (vals == "Credit Card") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Create a trail of all your credit card transactions by creating a credit card account.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("cr_div").style.display = "block";
            document.getElementById("acc_bo_div").style.display = "none";

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `Create a trail of all your credit card transactions by creating a credit card account`
            )

        } else if (vals == "Long Term Liability") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Liabilities that mature after a minimum period of one year like:<ul><li>Notes Payable</li><li>Debentures</li><li>Long Term Loans</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account66").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("sub_div66").style.display = "block";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            document.getElementById("acc_bo_div").style.display = "none";

            $('#message').append(
                `Liabilities that mature after a minimum period of one year like Notes Payable, Debentures, and Long Term Loans`
            )

        } else if (vals == "Other Liability") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Obligation of an entity arising from past transactions or events which would require repayment.<ul><li>Tax to be paid</li><li>Loan to be Repaid</li><li>Accounts Payable</li> etc.</ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account77").checked = false;

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div77").style.display = "block";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";


            $('#message').append(
                `Obligation of an entity arising from past transactions or events which would require repayment.<ul><li>Tax to be paid</li> <li>Loan to be Repaid</li> <li>Accounts Payable etc</li> </ul>`
            )

        } else if (vals == "Overseas Tax Payable") {
            document.getElementById('message_hd').innerHTML = "Liability<br><br>Track your taxes in this account if your business sells digital services to foreign customers.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            $('#message').append(
                `Track your taxes in this account if your business sells digital services to foreign customers.`
            )

        } else if (vals == "Equity") {
            document.getElementById('message_hd').innerHTML = "Equity<br><br>Owners or stakeholders interest on the assets of the business after deducting all the liabilities.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account88").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "block";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            document.getElementById("acc_bo_div").style.display = "none";

            $('#message').append(
                `Owners or stakeholders interest on the assets of the business after deducting all the liabilities`
            )

        } else if (vals == "Income") {
            document.getElementById('message_hd').innerHTML = "Income<br><br>Income or Revenue earned from normal business activities like sale of goods and services to customers.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account99").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "block";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";


            document.getElementById("acc_bo_div").style.display = "none";

            $('#message').append(
                `Income or Revenue earned from normal business activities like sale of goods and services to customers`
            )

        } else if (vals == "Other Income") {
            document.getElementById('message_hd').innerHTML = "Income<br><br>Income or revenue earned from activities not directly related to your business like :<ul><li>Interest Earned</li><li>Dividend Earned</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";

            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";


            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `Income or revenue earned from activties not directly related to your business like :<ul><li>Interest Earned</li> <li>Dividend Earned</li></ul>`
            )

        } else if (vals == "Expense") {
            document.getElementById('message_hd').innerHTML = "Expense<br><br>Reflects expenses incurred for running normal business operations, such as :<ul><li>Advertisements and Marketing</li><li>Business Travel Expenses</li><li>License Fees</li><li>Utility Expenses</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account100").checked = false;


            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div100").style.display = "block";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `Reflects expenses incurred for running normal business operations, such as :<ul><li>Advertisements and Marketing</li> <li>Business Travel Expenses</li><li>License Fees</li><li>Utility Expenses</li></ul>`
            )

        } else if (vals == "Cost Of Goods Sold") {
            document.getElementById('message_hd').innerHTML = "Expense<br><br>This indicates the direct costs attributable to the production of the goods sold by a company such as:<ul><li>Material and Labor costs</li><li>Cost of obtaining raw materials</li></ul>";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account111").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div222").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div111").style.display = "block";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";
            document.getElementById("sub_div222").style.display = "none";

            $('#message').append(
                `This indicates the direct costs attributable to the production of the goods sold by a company such as:<ul><li>Material and Labor costs</li> <li>Cost of obtaining raw materials</li></ul>`
            )

        } else if (vals == "Other Expense") {
            document.getElementById('message_hd').innerHTML = "Expense<br><br>Track miscellaneous expenses incurred for activities other than primary business operations or create additional accounts to track default expenses like insurance or contribution towards charity.";

            document.getElementById('message').innerHTML = ""
            document.getElementById("sub_account222").checked = false;

            document.getElementById("cr_div").style.display = "none";
            document.getElementById("name").style.display = "block";
            document.getElementById("credit").style.display = "none";
            document.getElementById("acc_bo_div").style.display = "none";
            document.getElementById("parent_div").style.display = "none";
            document.getElementById("parent_div22").style.display = "none";
            document.getElementById("parent_div33").style.display = "none";
            document.getElementById("parent_div44").style.display = "none";
            document.getElementById("parent_div55").style.display = "none";
            document.getElementById("parent_div66").style.display = "none";
            document.getElementById("parent_div77").style.display = "none";
            document.getElementById("parent_div88").style.display = "none";
            document.getElementById("parent_div99").style.display = "none";
            document.getElementById("parent_div100").style.display = "none";
            document.getElementById("parent_div111").style.display = "none";

            document.getElementById("sub_div").style.display = "none";
            document.getElementById("sub_div22").style.display = "none";
            document.getElementById("sub_div33").style.display = "none";
            document.getElementById("sub_div44").style.display = "none";
            document.getElementById("sub_div55").style.display = "none";
            document.getElementById("sub_div66").style.display = "none";
            document.getElementById("sub_div77").style.display = "none";
            document.getElementById("sub_div88").style.display = "none";
            document.getElementById("sub_div222").style.display = "block";
            document.getElementById("sub_div100").style.display = "none";
            document.getElementById("sub_div111").style.display = "none";
            document.getElementById("sub_div99").style.display = "none";

            $('#message').append(
                `Reflects expenses incurred for activities unrelated to primary business operations like :<ul><li>Bad debts</li> <li>Contributions Towards Charity</li><li>Insurance</li></ul>`
            )

        }




    };
</script>
<script>
    function filterFunction1() {
        var input, filter, ul, li, a, i, b, j;
        input = document.getElementById("myInput1");
        filter = input.value.toUpperCase();
        div = document.getElementById("myDropdown1");
        a = div.getElementsByClassName('opt');
        // a = div.getElementsByTagName('div');

        b = div.getElementsByTagName('li');

        for (i = 0; i < a.length; i++) {
            txtValue = a[i].textContent || a[i].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                a[i].style.display = "";
            }
            else {
                a[i].style.display = "none";
            }
        }
        for (j = 0; j < b.length; j++) {
            txtValue = b[j].textContent || b[j].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                b[j].style.display = "";
            }
            else {
                b[j].style.display = "none";
            }
        }

    }
</script>

<!-- --------------------item calc-------------------- -->

<!-- // item modal -->

<script>

$(document).ready(function() {

  $("#item-tax1").click(function() {
    $(".inter-intra").removeClass('d-none');
    $(".inter-intra").addClass('d-flex');
  });

  $("#item-tax2").click(function() {

    $(".inter-intra").removeClass('d-flex');
    $(".inter-intra").addClass("d-none");
  });
});


function showRate(id,name) {  debugger
    var n = id.slice(4);
    $.ajax({
      url: "{% url 'get_rate' %}",
      type : 'POST',
      data:{
          id : name,
          csrfmiddlewaretoken: '{{ csrf_token }}'
        },
    
      success: function(response) {
        $("#rate" +n).val(response.rate);
        $("#HSN" +n).val(response.hsn);
        $("#stock_data_hidden" +n).val(response.stock);
        $("#stock_data" +n)[0].innerHTML =response.stock; 

        srcofsupply();
        taxautoselect(response,n);
        itemchange();
      },
    });

  }

  function srcofsupply(){ 
      $(".selecttax").removeClass('d-flex');
      $(".selecttax").addClass('d-none');

      if(isGST())
      {
        $(".tax2").removeClass('d-flex');
        $(".tax2").addClass('d-none');
        $(".tax1").removeClass('d-none');
        $(".tax1").addClass('d-flex'); 

        $("#cgst1").removeClass('d-none');
        $("#cgst1").addClass('d-flex');
        $("#sgst1").removeClass('d-none');
        $("#sgst1").addClass('d-flex');

        $("#igst1").removeClass('d-flex');
        $("#igst1").addClass('d-none');

      }
      else{ 

        $(".tax2").removeClass('d-none');
        $(".tax2").addClass('d-flex');
        $(".tax1").removeClass('d-flex');
        $(".tax1").addClass('d-none'); 

        $("#igst1").removeClass('d-none');
        $("#igst1").addClass('d-flex');

        $("#cgst1").removeClass('d-flex');
        $("#cgst1").addClass('d-none');
        $("#sgst1").removeClass('d-flex');
        $("#sgst1").addClass('d-none');
      }
     
  }

  function taxautoselect(response,n){ debugger
    var inter_id = parseInt(response.inter.match(/\d+/)[0], 10);
    var intra_id = parseInt(response.intra.match(/\d+/)[0], 10);
    console.log(inter_id);
    console.log(intra_id);
    $("#inter_tax"+n).val(inter_id).change();
    $("#intra_tax"+n).val(intra_id).change();
    $("#qty"+n).val(1); 
  }

 function itemchange(){debugger
  
  var row_count = $("#items-table-body tr").length;
    var tax_tot = 0

    var amount_total = 0;
    var ship = parseFloat($("#addcharge").val());

    for(var i=0; i<row_count;i++){
      var rate = $("#rate"+i).val();
      var qnty = $("#qty" +i).val();
      var amount = rate*qnty;
      var disc = $("#disc" + i).val();

      var tax1 = $("#intra_tax" +i).val();
      var tax2 = $("#inter_tax" +i).val();

      if (tax1 == 0){
        if(tax2 == 0){
          if (disc){
            amount_disc =  amount - disc;
            $("#amount" + i).val(amount_disc);
             
          }

          else{
            $("#amount" +i).val(amount);
           }
          tax = 0;
          tax_tot += tax;
        }
        else{
          if (disc){
            amount_disc =  amount - disc;
            $("#amount" + i).val(amount_disc);
            tax =(amount_disc*(tax2/100));
          }

          else{
            $("#amount" +i).val(amount);
            tax =(amount*(tax2/100));
           }
          
          tax_tot += tax;
          $("#igst").val(tax_tot);
          $("#total_taxamount").val(tax_tot);
        }
      }
      else{
        if (disc){
            amount_disc =  amount - disc;
            $("#amount" + i).val(amount_disc);
            tax =(amount_disc*(tax1/100));
          }

          else{
            $("#amount" +i).val(amount);
            tax =(amount*(tax1/100));
           }
        tax = (amount*(tax1/100));
        tax_tot += tax;
        $("#igst").val(tax_tot);
        $("#sgst").val(tax_tot/2);
        $("#cgst").val(tax_tot/2);
        $("#total_taxamount").val(tax_tot);
      }

      if(ship){
        // console.log('yea');
        if (disc){
          amount_disc =  amount - disc;
          $("#amount" + i).val(amount_disc);
          amount_total += amount_disc;
          $("#subtotal").val(amount_total);
          
          $("#grandtotal").val(amount_total+ ship +tax_tot);
        }

        else{
          $("#amount" +i).val(amount);
          amount_total += amount;
          $("#subtotal").val(amount_total);
          $("#grandtotal").val(amount_total+ ship +tax_tot);
        }
      }
      else{

        if (disc){
          amount_disc =  amount - disc;
          $("#amount" +i).val(amount_disc);
          amount_total += amount_disc;
          $("#subtotal").val(amount_total);
        
          $("#grandtotal").val(amount_total+tax_tot);
        }

        else{
          $("#amount" +i).val(amount);
          amount_total += amount;
          $("#subtotal").val(amount_total);
          $("#grandtotal").val(amount_total+tax_tot);
        }
      }
      
    }  
 }

 $(document).on('change', '#srcofsupply',function(){ debugger

$(".selecttax").removeClass('d-none');
$(".selecttax").addClass('d-flex');
var st = $("#srcofsupply").val().split(" ").slice(1).join(" ").trim();
// console.log(st)
if( st == $("#company_state").val())
{
  // tax - 1 GST
   $(".tax2").removeClass('d-flex');
   $(".tax2").addClass('d-none');
   $(".tax1").removeClass('d-flex');
   $(".tax1").addClass('d-none');

  $("#cgst1").removeClass('d-none');
  $("#cgst1").addClass('d-flex');
  $("#sgst1").removeClass('d-none');
  $("#sgst1").addClass('d-flex');

  $("#igst1").removeClass('d-flex');
  $("#igst1").addClass('d-none');


}
else{
  $(".tax1").removeClass('d-flex');
  $(".tax1").addClass('d-none');
  $(".tax2").removeClass('d-flex');
  $(".tax2").addClass('d-none');

  $("#igst1").removeClass('d-none');
  $("#igst1").addClass('d-flex');

  $("#cgst1").removeClass('d-flex');
  $("#cgst1").addClass('d-none');
  $("#sgst1").removeClass('d-flex');
  $("#sgst1").addClass('d-none');
}
});


$(document).on("click",".selecttax",function(){
debugger
// $(".selecttax").removeClass('d-flex');
// $(".selecttax").addClass('d-none');
var st = $("#srcofsupply").val();
var comp_state =["[KL] Kerala","[KL]-Kerala","kerala","Kerala","Kerala [KL]","Kerala - [KL]"]; 
if(comp_state.indexOf(st) > -1){
// $(".tax2").addClass('d-none');
// $(".tax1").removeClass('d-none');
// $(".tax1").addClass('d-flex');

}
else{
// $(".tax1").addClass('d-none');
// $(".tax2").removeClass('d-none');
// $(".tax2").addClass('d-flex');
}

});


$(document).on('change','.qty',function(){debugger

var row_count = $("#items-table-body tr").length;
var tax_tot = 0

var amount_total = 0;
var ship = parseFloat($("#addcharge").val());

for(var i=0; i<row_count;i++){
  var rate = $("#rate"+i).val();
  var qnty = $("#qty" +i).val();
  var amount = rate*qnty;
  var disc = $("#disc" + i).val();

  var tax1 = $("#intra_tax" +i).val();
  var tax2 = $("#inter_tax" +i).val();
  var stock = parseInt($("#stock_data_hidden" + i).val()); // Parse integer for stock
        var newStock = stock - qnty; // Calculate new stock after deducting quantity

        // Update stock display
        $("#stock_data" + i).text(newStock);

        // Update hidden input field with new stock value
        $("#stock_data_hidden" + i).val(stock);

        
  if (tax1 == 0){
    if(tax2 == 0){
      if (disc){
        amount_disc =  amount - disc;
        $("#amount" + i).val(amount_disc);
         
      }

      else{
        $("#amount" +i).val(amount);
       }
      tax = 0;
      tax_tot += tax;
    }
    else{
      if (disc){
        amount_disc =  amount - disc;
        $("#amount" + i).val(amount_disc);
        tax =(amount_disc*(tax2/100));
      }

      else{
        $("#amount" +i).val(amount);
        tax =(amount*(tax2/100));
       }
      
      tax_tot += tax;
      $("#igst").val(tax_tot);
      $("#total_taxamount").val(tax_tot);
    }
  }
  else{
    if (disc){
        amount_disc =  amount - disc;
        $("#amount" + i).val(amount_disc);
        tax =(amount_disc*(tax1/100));
      }

      else{
        $("#amount" +i).val(amount);
        tax =(amount*(tax1/100));
       }
    tax = (amount*(tax1/100));
    tax_tot += tax;
    $("#sgst").val(tax_tot/2);
    $("#cgst").val(tax_tot/2);
    $("#total_taxamount").val(tax_tot);
  }

  if(ship){
    // console.log('yea');
    if (disc){
      amount_disc =  amount - disc;
      $("#amount" + i).val(amount_disc);
      amount_total += amount_disc;
      $("#subtotal").val(amount_total);
      
      $("#grandtotal").val(amount_total+ ship +tax_tot);
    }

    else{
      $("#amount" +i).val(amount);
      amount_total += amount;
      $("#subtotal").val(amount_total);
      $("#grandtotal").val(amount_total+ ship +tax_tot);
    }
  }
  else{

    if (disc){
      amount_disc =  amount - disc;
      $("#amount" +i).val(amount_disc);
      amount_total += amount_disc;
      $("#subtotal").val(amount_total);
    
      $("#grandtotal").val(amount_total+tax_tot);
    }

    else{
      $("#amount" +i).val(amount);
      amount_total += amount;
      $("#subtotal").val(amount_total);
      $("#grandtotal").val(amount_total+tax_tot);
    }
  }
  
}  
});


$(document).on('change','.disc',function(){ debugger

var row_count1 = $("#items-table-body tr").length;
var amount_tot = 0;
var amount_disc,tax_tot1= 0;
var i,rate,qnty,amount;
var ship = parseFloat($("#addcharge").val());

for(i = 0;i<row_count1 ; i++){

  rate = $("#rate"+ i).val();
  qnty = $("#qty" + i).val();
  amount = rate*qnty;
  
  amount_disc =amount - $("#disc" + i).val();
  $("#amount" + i).val(amount_disc);

  amount_tot += amount_disc;

  $("#subtotal").val(amount_tot);

  var tax1 = $("#intra_tax" +i).val();
  var tax2 = $("#inter_tax" +i).val();

  if (tax1 == 0){
    if(tax2 == 0){
      tax = 0;
      tax_tot1 += tax;
    }
    else{
      tax = amount_disc*(tax2/100);
      tax_tot1 += tax;
      $("#igst").val(tax_tot1);
      $("#total_taxamount").val(tax_tot1);
    }
  }
  else{
      tax = amount_disc*(tax1/100);
      tax_tot1 += tax;
      $("#sgst").val(tax_tot1/2);
      $("#cgst").val(tax_tot1/2);
      $("#total_taxamount").val(tax_tot1);
  }
  // console.log(tax)
  // console.log(tax_tot1)

  if(ship){
    $("#grandtotal").val(amount_tot+tax_tot1+ship);
  }

  else{
     $("#grandtotal").val(amount_tot+tax_tot1);
  }
}

});


$(document).on("change",".tax1",function(){ debugger

var row_count2 = $("#items-table-body tr").length;
var amount_tot1 = 0;
var ship = parseFloat($("#addcharge").val());
var tot_tax,tax_tot3 = 0;
var i;

for(i = 0;i<row_count2 ; i++){

  var rate = $("#rate"+i).val();
  var qnty = $("#qty" +i).val();
  var amount = rate*qnty;
  var disc = $("#disc" + i).val();
  var tax = $("#intra_tax"+i).val();

  if(disc){
    tot_tax = (amount-disc) * (tax/100);
  }
  else{
    tot_tax = amount * (tax/100);
  }
  
  tax_tot3 += tot_tax;

  $("#sgst").val(tax_tot3/2);
  $("#cgst").val(tax_tot3/2);
  $("#total_taxamount").val(tax_tot3);

  if(disc){
    if(ship){
      amount_disc = amount - disc;
      amount_tot1 += amount_disc
      $("#subtotal").val(amount_tot1);
      $("#grandtotal").val(amount_tot1+tax_tot3+ship);
    }
    else{
      amount_disc = amount - disc;
      amount_tot1 += amount_disc
      $("#subtotal").val(amount_tot1);
      $("#grandtotal").val(amount_tot1+tax_tot3);
    }
    
  }
  else{
    if(ship){
      amount_tot1 += amount; 
      $("#subtotal").val(amount_tot1);
      $("#grandtotal").val(amount_tot1+tax_tot3+ship);
    }
    else{
      amount_tot1 += amount; 
      $("#subtotal").val(amount_tot1);
      $("#grandtotal").val(amount_tot1+tax_tot3);
    }
  }
}

});

$(document).on("change",".tax2",function(){
debugger
var row_count2 = $("#items-table-body tr").length;
var amount_to = 0;
var tax_tot4= 0;
var ship = parseFloat($("#addcharge").val());
var i;

for(i = 0;i<row_count2 ; i++){
  console.log(i);
  var rate = $("#rate"+i).val();
  var qnty = $("#qty" +i).val();
  var amount = rate*qnty;
  var disc = $("#disc" + i).val();
  var tax = $("#inter_tax"+i).val();
  var tot

  if(disc){
    tot = (amount-disc) * (tax/100);
  }
  else{
    tot = amount * (tax/100);
  }

  tax_tot4 += tot

  $("#sgst").val(tax_tot4/2);
  $("#cgst").val(tax_tot4/2);
  $("#total_taxamount").val(tax_tot4);

  $("#igst").val(tax_tot4);

  if(disc){
    amount_disc = amount - disc;
    amount_to += amount_disc;

    $("#subtotal").val(amount_to);
    $("#grandtotal").val(amount_to+tax_tot4);
  
  }
  else{
    amount_to += amount;
    $("#subtotal").val(amount_to);
    $("#grandtotal").val(amount_to+tax_tot4)
    
  }
}
});


$(document).on("change","#addcharge",function(){ debugger

  //var sta = $("#srcofsupply").val().split('-')[1]
  // if(sta == $("#company_state").val()){
  //   var total =parseFloat( $("#subtotal").val())+ parseFloat( $("#sgst").val())+ parseFloat($("#cgst").val())+ parseFloat($("#addcharge").val());
  //   $("#grandtotal").val(total);
  // }
  // else if(sta != $("#company_state").val()){
  //   var total = parseFloat($("#subtotal").val())+  parseFloat($("#igst").val())+ parseFloat($("#addcharge").val());
  //   $("#grandtotal").val(total);
  // }
  // else{
  //   var total = parseFloat($("#subtotal").val())+  parseFloat($("#addcharge").val());
  //   $("#grandtotal").val(total);
  // }
  var total = parseFloat($("#subtotal").val())+  parseFloat($("#addcharge").val());
 
  if(isGST()){
    total = parseFloat( $("#subtotal").val())+ parseFloat( $("#sgst").val())+ parseFloat($("#cgst").val())+ parseFloat($("#addcharge").val());
    $("#grandtotal").val(total);

  }
  else{
    total = parseFloat($("#subtotal").val())+  parseFloat($("#igst").val())+ parseFloat($("#addcharge").val());
  }
  $("#grandtotal").val(total);
});

$(document).on("change", "#add_round_off", function(){
  var round = parseFloat($("#grandtotal").val()) + parseFloat($("#add_round_off").val()) 
  $("#grandtotal").val(round);
});


// $(document).on("click",'#save',function(){

//   var input1 = document.getElementById("disc");
//   if (input1.value === "") {
//     input1.value = 0;
//   }
//   var input2 = document.getElementById("date1");
//   if (input2.value === "") {
//     input2.value = "{% now 'Y-m-d' %}";
//   }

// });
</script>

<script>
// set todays date on estimate date field
var today = new Date().toISOString().substr(0, 10);
document.getElementById("date1").value = today;

// Get the bill date and due date elements
var billDateInput = document.getElementById("date1");
var endDateInput = document.getElementById("date2");

// Add an event listener to the payment terms select element
var recpaymentTermsSelect = document.getElementById("terms");
recpaymentTermsSelect.addEventListener("change", function () {
    var selectedOption = recpaymentTermsSelect.options[recpaymentTermsSelect.selectedIndex];
    var recpaymentTermsValue = selectedOption.value;

    var billDate = new Date(billDateInput.value);
    var endDate = new Date(billDate.getTime() + (recpaymentTermsValue * 24 * 60 * 60 * 1000));
    endDateInput.value = endDate.toISOString().split("T")[0];
});
</script>

<script>

function cancelDialog() {

  var frm = document.getElementById("forms");
  let customMsg = "Do you want to cancel?";

  if (confirm(customMsg)) {
      alert("Recurring Bill cancelled!")
  }
}

function saveAsDraftDialog() { 
document.getElementById("date2").disabled = false; 
let grand_total = $('#grandtotal').val();
let paid = $('#amtPaid').val(); 
if(parseFloat(paid) > parseFloat(grand_total)){
   alert("Paid amount should not be greater than grand total.")
}
else{
  var bill_no = "{{bill_no}}"
  if(bill_no != "None"){
    var predict_bill_no = bill_no.replace(bill_no.match(/(\d+)/g)[0], '')+(parseFloat(bill_no.match(/\d+/)[0])+1)
    let bills = $("#bills").val();

    if(predict_bill_no != bills ){
          alert("Bill No: is not continuous.")
    }
  } 
  var frm = document.getElementById("forms");
  frm.action = ("")
}
}

function saveAndOpenDialog() { 
document.getElementById("date2").disabled = false; 
let grand_total = $('#grandtotal').val();
let paid = $('#amtPaid').val(); 
if(parseFloat(paid) > parseFloat(grand_total)){
   alert("Paid amount should not be greater than grand total.")
}
else{
  
  var bill_no = "{{bill_no}}"
  if(bill_no != "None"){
    var predict_bill_no = bill_no.replace(bill_no.match(/(\d+)/g)[0], '')+(parseFloat(bill_no.match(/\d+/)[0])+1)
    let bills = $("#bills").val();

    if(predict_bill_no != bills ){
          alert("Bill No: is not continuous.")
    }
  } 
  var frm = document.getElementById("forms");
  frm.action = ("")  
}
  
}
</script>
<script>
function isGST()
{
 var gst_state =["[KL] Kerala","[KL]-Kerala","kerala","Kerala","Kerala [KL]","Kerala-[KL]"];  
 let customer_st  =$("#srcofsupply").val();
 if(gst_state.indexOf(customer_st)>-1)
  {   
    $(".tax2").removeClass('d-flex');
    $(".tax2").addClass('d-none');
    $(".tax1").removeClass('d-none');
    $(".tax1").addClass('d-flex'); 

    $("#cgst1").removeClass('d-none');
    $("#cgst1").addClass('d-flex');
    $("#sgst1").removeClass('d-none');
    $("#sgst1").addClass('d-flex');

    $("#igst1").removeClass('d-flex');
    $("#igst1").addClass('d-none');
    return true;
  }
  else{
    $(".tax2").removeClass('d-none');
    $(".tax2").addClass('d-flex');
    $(".tax1").removeClass('d-flex');
    $(".tax1").addClass('d-none'); 

    $("#igst1").removeClass('d-none');
    $("#igst1").addClass('d-flex');

    $("#cgst1").removeClass('d-flex');
    $("#cgst1").addClass('d-none');
    $("#sgst1").removeClass('d-flex');
    $("#sgst1").addClass('d-none');
    return false;
  }
}
</script>
<script>
$(document).ready(function() {
$("#c_gstin").change(function() {

    var x=$("#c_gstin").val();
    var c_gst_label=document.getElementById("c_gst_label")
    var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
    if (!expr.test(x)) {
      c_gst_label.style.display="block";
      c_gst_label.style.color="red";
      c_gst_label.innerHTML = "Invalid GST Number.";
    }
    else{
      c_gst_label.style.color="green";
      c_gst_label.innerHTML = "Valid GST Number.";

    }
  });
});

$(document).ready(function() {
  $("#c_pan").change(function() {
    var x= $("#c_pan").val();
    var pan_label=document.getElementById("pan_label")
    var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
    if (!expr.test(x)) {
        pan_label.style.display="block";
        pan_label.style.color="red";
        pan_label.innerHTML = "Invalid PAN Number.";
    }
    else{
        pan_label.style.color="green";
        pan_label.innerHTML = "Valid PAN Number.";

    }
  });
});

$(document).ready(function() {
$("#c_gsttype").change(function() {
  var x=$('#c_gsttype').val();
  console.log(x)
  if(x=="Unregistered Business-not Registered under GST") 
  {
    $(".gstrow").addClass('d-none');
    

  }
  else if(x == 'Overseas- Persons with who you do import or exports of supplies outside india'){
    $(".gstrow").addClass('d-none');
    console.log('poor')
  }
  else 
  {
    $(".gstrow").removeClass('d-none');
    $(".gstrow").addClass('d-flex');
  
  }

});
});
</script>

<script>
function validateForm() {
  var paymentTerms = document.getElementById("date2").value;
  if (paymentTerms === "") {
      document.getElementById("date2").classList.add("is-invalid");
      document.getElementById("date2").classList.remove("is-valid");
      return false;
  } else {
      document.getElementById("date2").classList.remove("is-invalid");
      document.getElementById("date2").classList.add("is-valid");
      return true;
  }
}

// Validate the form on submit
document.getElementById("forms").addEventListener("submit", function (event) {
  if (!validateForm()) {
      event.preventDefault();
  }
});

</script>

<!-- --------------------------end item calc------------------- -->

{% endblock %}